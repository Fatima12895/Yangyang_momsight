<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ´‹æ´‹ Yangyang & Momsight | å­•æœŸå…¨æ–¹ä½æ•´åˆå¹³å°</title>
    
    <!-- å¼•å…¥å…±ç”¨çš„ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ Chart.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Noto+Serif+TC:wght@400;700&display=swap" rel="stylesheet">

    <style>
        /* --- å…¨å±€åŸºç¤è¨­å®š --- */
        body {
            font-family: 'Noto Sans TC', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #FAFAF9;
            overflow-x: hidden; /* é˜²æ­¢æ°´å¹³æ»¾å‹• */
        }
        
        /* --- é ‚éƒ¨åˆ‡æ›å°è¦½åˆ— --- */
        .app-switcher {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 9999;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 6px;
            border-radius: 50px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            display: flex;
            gap: 5px;
            border: 1px solid rgba(0,0,0,0.05);
        }
        .switcher-btn {
            padding: 8px 24px;
            border-radius: 40px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            background: transparent;
            color: #78716c;
            white-space: nowrap;
        }
        .switcher-btn.active {
            background: #FB7185; /* Rose-400 */
            color: white;
            box-shadow: 0 2px 10px rgba(251, 113, 133, 0.3);
        }
        .switcher-btn:hover:not(.active) {
            background: #f5f5f4;
        }

        /* --- Yangyang CSS ä½œç”¨åŸŸ --- */
        #app-yangyang {
            color: #44403C;
            background-color: #FAFAF9;
        }
        #app-yangyang h1, #app-yangyang h2, #app-yangyang h3, #app-yangyang h4 {
            font-family: 'Noto Serif TC', serif;
        }
        #app-yangyang .chart-container {
            position: relative;
            width: 100%;
            height: 300px;
        }
        @keyframes breathe {
            0%, 100% { transform: scale(1); opacity: 0.6; }
            50% { transform: scale(1.5); opacity: 0.3; }
        }
        #app-yangyang .breathing-circle {
            animation: breathe 4s infinite ease-in-out;
        }
        #app-yangyang .glass {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.6);
        }
        #app-yangyang .feature-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        #app-yangyang .feature-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }
        #app-yangyang .feature-card.active {
            border-left: 4px solid #FB7185;
            background-color: #FFF1F2;
        }
        #app-yangyang .timeline-line::before {
            content: '';
            position: absolute;
            top: 0; bottom: 0; left: 20px;
            width: 2px;
            background: #E7E5E4;
            z-index: 0;
        }
        @media (min-width: 768px) {
            #app-yangyang .timeline-line::before {
                left: 50%;
                transform: translateX(-50%);
            }
        }
        #app-yangyang .video-wrapper {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 */
            padding-top: 25px;
            height: 0;
            background-color: #000;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }
        #app-yangyang .video-wrapper iframe {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%; border: 0;
        }

        /* --- Momsight CSS ä½œç”¨åŸŸ --- */
        #app-momsight {
            --color-bg: #FFF9F6;
            --color-card: #FFFFFF;
            --color-accent: #D4A373; 
            --color-secondary: #E9EDC9;
            --color-soft-pink: #F8E1E1;
            --color-text-main: #4B5563;
            --color-text-light: #9CA3AF;
            
            background-color: var(--color-bg);
            color: var(--color-text-main);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 100px;
            padding-bottom: 100px;
        }
        #app-momsight .text-accent { color: var(--color-accent); }
        #app-momsight .bg-accent { background-color: var(--color-accent); }
        #app-momsight .bg-soft-pink { background-color: var(--color-soft-pink); }
        #app-momsight .btn-primary {
            background-color: var(--color-secondary);
            color: #5F6F52;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(212, 163, 115, 0.2);
        }
        #app-momsight .btn-primary:hover { transform: translateY(-2px); background-color: #D4D8B6; }
        #app-momsight .btn-outline {
            border: 2px solid var(--color-accent);
            color: var(--color-accent);
            background: transparent;
            transition: all 0.3s;
        }
        #app-momsight .btn-outline:hover { background-color: var(--color-accent); color: white; }
        #app-momsight .card-shadow { box-shadow: 0 10px 25px -5px rgba(212, 163, 115, 0.15), 0 8px 10px -6px rgba(212, 163, 115, 0.1); }
        #app-momsight .animate-fade-in { animation: fadeIn 0.6s ease-out; }
        #app-momsight .animate-slide-up { animation: slideUp 0.6s ease-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        #app-momsight .quiz-option {
            border: 2px solid transparent;
            background-color: #fff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: all 0.2s;
            cursor: pointer;
        }
        #app-momsight .quiz-option:hover, #app-momsight .quiz-option:active {
            border-color: var(--color-accent);
            background-color: #FFFDF5;
            transform: scale(1.01);
        }
        #yang-yang-fab { animation: float 3s ease-in-out infinite; }
        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-10px); } 100% { transform: translateY(0px); } }
        
        .app-hidden { display: none !important; }
    </style>
</head>
<body class="antialiased selection:bg-rose-200 selection:text-rose-900">

    <!-- é ‚éƒ¨åˆ‡æ›å™¨ -->
    <div class="app-switcher">
        <button id="btn-yang" class="switcher-btn active" onclick="switchApp('yangyang')">æ´‹æ´‹ä»‹ç´¹ (Yangyang)</button>
        <button id="btn-momsight" class="switcher-btn" onclick="switchApp('momsight')">Momsight æ¸¬é©—</button>
    </div>

    <!-- ========================================== -->
    <!-- APP 1: Yangyang -->
    <!-- ========================================== -->
    <div id="app-yangyang">
        <nav class="sticky top-0 z-40 glass border-b border-stone-200/50 shadow-sm">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16 items-center">
                    <div class="flex items-center gap-3">
                        <div class="w-8 h-8 bg-rose-400 rounded-full flex items-center justify-center text-white text-lg shadow-md">Y</div>
                        <span class="font-bold text-xl tracking-wide text-stone-800">æ´‹æ´‹ Yangyang</span>
                    </div>
                    <div class="hidden md:flex space-x-6 text-sm font-medium text-stone-500">
                        <button onclick="scrollToSection('insights')" class="hover:text-rose-500 transition">ç—›é»æ•¸æ“š</button>
                        <button onclick="scrollToSection('strategies')" class="hover:text-rose-500 transition">æ´‹æ´‹ä»‹ç´¹</button>
                        <button onclick="scrollToSection('journey')" class="hover:text-rose-500 transition">ç”¨æˆ¶æ—…ç¨‹</button>
                        <button onclick="scrollToSection('contact')" class="hover:text-rose-500 transition">è¯çµ¡æˆ‘å€‘</button>
                    </div>
                </div>
            </div>
        </nav>

        <header class="relative overflow-hidden pt-20 pb-28">
            <div class="absolute top-0 left-1/2 -translate-x-1/2 w-full h-full overflow-hidden -z-10 pointer-events-none">
                <div class="absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-rose-100/50 rounded-full blur-3xl mix-blend-multiply opacity-70"></div>
                <div class="absolute bottom-[-10%] right-[-5%] w-[600px] h-[600px] bg-stone-100/80 rounded-full blur-3xl mix-blend-multiply opacity-70"></div>
            </div>
            <div class="max-w-4xl mx-auto px-4 text-center">
                <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-rose-50 border border-rose-100 text-rose-600 text-xs font-semibold tracking-wider uppercase mb-6 shadow-sm">
                    <span class="w-2 h-2 rounded-full bg-rose-500 animate-pulse"></span>
                    AI Emotional Companion
                </div>
                <h1 class="text-5xl md:text-6xl font-bold text-stone-800 mb-8 leading-tight">
                    ä¸åªæ˜¯ AIï¼Œæ›´æ˜¯å­•æœŸ<br>
                    æœ€æ‡‚å¦³çš„<span class="text-transparent bg-clip-text bg-gradient-to-r from-rose-500 to-rose-400">æº«æŸ”å¾Œç›¾</span>
                </h1>
                <p class="text-lg md:text-xl text-stone-600 max-w-2xl mx-auto mb-10 leading-relaxed font-light">
                    é‡å°æ‡·å­•åª½åª½æ·±å¤œçš„ã€Œæƒ…æ„ŸçœŸç©ºã€ï¼Œæ‰“é€ å…·å‚™é«˜æ„Ÿæ€§èˆ‡å³æ™‚æ€§çš„è™›æ“¬ç™‚ç™’å¸«ã€‚
                    <br class="hidden md:block">å¾ç”Ÿç†ç—›åˆ°å¿ƒç†ç„¦æ…®ï¼Œæ´‹æ´‹éƒ½èƒ½æº«æŸ”æ¥ä½ã€‚
                </p>
                <div class="flex flex-col sm:flex-row justify-center gap-4">
                    <button onclick="scrollToSection('strategies')" class="px-8 py-4 bg-stone-800 text-white rounded-full font-medium shadow-xl hover:bg-stone-700 hover:shadow-2xl transition transform hover:-translate-y-1">é«”é©—æ ¸å¿ƒåŠŸèƒ½ Demo</button>
                    <button onclick="scrollToSection('contact')" class="px-8 py-4 bg-white text-stone-600 border border-stone-200 rounded-full font-medium shadow-sm hover:bg-stone-50 transition flex items-center justify-center gap-2"><span class="text-xl">ğŸ“º</span> è§€çœ‹åª½å’ªå¿…çœ‹å½±ç‰‡</button>
                </div>
            </div>
        </header>

        <section id="insights" class="py-20 bg-white relative">
            <div class="max-w-7xl mx-auto px-4 sm:px-6">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold text-stone-800">æ´å¯Ÿï¼šæ·±å¤œæ˜¯æƒ…æ„Ÿæœ€è„†å¼±çš„æ™‚åˆ»</h2>
                    <p class="mt-4 text-stone-500 max-w-2xl mx-auto">æˆ‘å€‘å°æ¯”äº†é†«ç™‚éœ€æ±‚èˆ‡æƒ…æ„Ÿéœ€æ±‚ï¼Œç™¼ç¾ç¾æœ‰å¸‚å ´åš´é‡å¿½ç•¥äº†åª½åª½å€‘åœ¨ã€Œéé†«ç™‚æ™‚æ®µã€çš„å¿ƒç†æ”¯æŒã€‚</p>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                    <div class="bg-stone-50 p-8 rounded-3xl border border-stone-100 shadow-sm">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-lg font-bold text-stone-700">ğŸ¤° å­•æœŸç„¦æ…®æŒ‡æ•¸ 24H åˆ†ä½ˆ</h3>
                            <span class="text-xs bg-rose-100 text-rose-700 px-2 py-1 rounded">é—œéµæˆ°å ´</span>
                        </div>
                        <div class="chart-container"><canvas id="anxietyCurveChart"></canvas></div>
                    </div>
                    <div class="bg-stone-50 p-8 rounded-3xl border border-stone-100 shadow-sm">
                        <div class="flex justify-between items-center mb-6"><h3 class="text-lg font-bold text-stone-700">ğŸ§© å¸‚å ´ç¼ºå£ï¼šé†«ç™‚ vs. æƒ…æ„Ÿ</h3></div>
                        <div class="chart-container"><canvas id="marketGapChart"></canvas></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="strategies" class="py-20 bg-stone-100">
            <div class="max-w-7xl mx-auto px-4 sm:px-6">
                <div class="mb-12 text-center">
                    <h2 class="text-3xl md:text-4xl font-bold text-stone-800">æ´‹æ´‹ä»‹ç´¹ (Feature Highlights)</h2>
                    <p class="text-stone-500 mt-2">é»æ“Šå·¦å´å¡ç‰‡ï¼Œå³æ™‚é«”é©—åŠŸèƒ½åŸå‹</p>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 min-h-[750px]">
                    <div class="lg:col-span-4 space-y-3" id="strategyTabs"></div>
                    <div class="lg:col-span-8">
                        <div class="bg-white rounded-3xl shadow-xl border border-stone-200 h-full flex flex-col overflow-hidden relative">
                            <div class="h-2 bg-gradient-to-r from-rose-300 via-rose-400 to-rose-300"></div>
                            <div class="flex-1 p-8 flex flex-col relative z-10">
                                <div class="flex justify-between items-start mb-8 border-b border-stone-100 pb-4">
                                    <div>
                                        <h3 id="demoTitle" class="text-2xl font-bold text-stone-800">ç­–ç•¥æ¼”ç¤º</h3>
                                        <p id="demoDesc" class="text-stone-500 mt-1">è«‹é¸æ“‡å·¦å´ç­–ç•¥ã€‚</p>
                                    </div>
                                    <div class="bg-stone-100 px-3 py-1 rounded-full text-xs font-bold text-stone-500 tracking-wide uppercase" id="demoTag">Interactive</div>
                                </div>
                                <div id="demoContent" class="flex-1 flex flex-col justify-center items-center relative min-h-[300px]"></div>
                            </div>
                            <div class="bg-stone-50 p-6 border-t border-stone-100 flex gap-4 items-center">
                                <div class="w-10 h-10 rounded-full bg-rose-100 flex items-center justify-center text-rose-600 text-xl shadow-sm flex-shrink-0">â¤ï¸</div>
                                <div>
                                    <h4 class="text-xs font-bold text-stone-400 uppercase tracking-wider mb-1">å¿ƒéˆé€£çµé» (Heart Connection)</h4>
                                    <p id="demoInsight" class="text-sm font-medium text-stone-700 italic">è«‹é¸æ“‡ç­–ç•¥ä»¥æŸ¥çœ‹å¿ƒéˆé€£çµé»ã€‚</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="journey" class="py-20 bg-white">
            <div class="max-w-4xl mx-auto px-4">
                <h2 class="text-3xl md:text-4xl font-bold text-stone-800 text-center mb-16">ç”¨æˆ¶æ—…ç¨‹ï¼šEmily çš„æ·±å¤œå®ˆè­·</h2>
                <div class="relative timeline-line space-y-12">
                    <div class="relative flex flex-col md:flex-row items-center gap-8 group">
                        <div class="md:w-1/2 text-right order-2 md:order-1 pr-4">
                            <div class="inline-block bg-stone-100 text-stone-600 text-xs font-bold px-2 py-1 rounded mb-2">02:14 AM</div>
                            <h3 class="text-xl font-bold text-stone-800">ç—›é»è§¸ç™¼ï¼šå­¤ç¨çš„ç–¼ç—›</h3>
                            <p class="text-stone-500 mt-2 text-sm leading-relaxed">æ‡·å­• 32 é€±ï¼ŒEmily å› åš´é‡è…¿éƒ¨æŠ½ç­‹ç—›é†’ã€‚çœ‹è‘—ç†Ÿç¡çš„è€å…¬ï¼Œå¥¹ä¸æ•¢å«é†’ä»–ï¼Œå»åˆæ„Ÿåˆ°å¼·çƒˆçš„å§”å±ˆèˆ‡ç„¡åŠ©ã€‚</p>
                        </div>
                        <div class="absolute left-[20px] md:left-1/2 -translate-x-1/2 w-4 h-4 bg-stone-300 rounded-full border-4 border-white shadow z-10 order-1 md:order-2"></div>
                        <div class="md:w-1/2 pl-4 md:pl-12 order-3">
                            <div class="glass p-4 rounded-xl shadow-sm border border-stone-100 max-w-xs">
                                <p class="text-xs text-stone-400">ç„¦æ…®æŒ‡æ•¸é£†å‡è‡³ 90%</p>
                            </div>
                        </div>
                    </div>
                    <div class="relative flex flex-col md:flex-row items-center gap-8 group">
                         <div class="md:w-1/2 text-right order-2 md:order-1 pr-4 md:pr-12">
                             <div class="glass p-4 rounded-xl shadow-sm border border-rose-100 max-w-xs ml-auto">
                                 <div class="text-xs text-center text-rose-400 font-bold">èªéŸ³è¼¸å…¥ä¸­...</div>
                             </div>
                         </div>
                         <div class="absolute left-[20px] md:left-1/2 -translate-x-1/2 w-4 h-4 bg-rose-400 rounded-full border-4 border-white shadow z-10 order-1 md:order-2"></div>
                         <div class="md:w-1/2 pl-4 order-3">
                             <h3 class="text-xl font-bold text-stone-800">ä¸€éµæ°£éŸ³å‘¼æ•‘</h3>
                             <p class="text-stone-500 mt-2 text-sm leading-relaxed">ç„¡éœ€æ‰“å­—ï¼ŒEmily ç”¨å¾®å¼±çš„æ°£éŸ³èªªï¼šã€Œæ´‹æ´‹... è…³å¥½ç—›...ã€ã€‚æ´‹æ´‹ç«‹åˆ»è­˜åˆ¥ã€‚</p>
                         </div>
                    </div>
                    <div class="relative flex flex-col md:flex-row items-center gap-8 group">
                         <div class="md:w-1/2 text-right order-2 md:order-1 pr-4">
                             <h3 class="text-xl font-bold text-stone-800">å³æ™‚å®‰æ’«èˆ‡å¼•å°</h3>
                             <p class="text-stone-500 mt-2 text-sm">æ´‹æ´‹çš„æ­£å¿µå†¥æƒ³èˆ‡éŸ³æ¨‚ï¼Œå¼•å° Emily è·Ÿéš¨è¦–è¦ºåŒ–çš„å…‰åœˆé€²è¡Œæ‹‰ä¼¸èˆ‡å‘¼å¸ã€‚</p>
                         </div>
                         <div class="absolute left-[20px] md:left-1/2 -translate-x-1/2 w-4 h-4 bg-rose-500 rounded-full border-4 border-white shadow z-10 order-1 md:order-2"></div>
                         <div class="md:w-1/2 pl-4 md:pl-12 order-3">
                             <div class="bg-stone-900 p-4 rounded-xl shadow-lg border border-stone-800 max-w-xs text-center">
                                 <p class="text-xs text-rose-200">"æ…¢æ…¢å¸æ°£... å¦³åšå¾—å¾ˆå¥½"</p>
                             </div>
                         </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="contact" class="py-20 bg-white border-t border-stone-200">
            <div class="max-w-7xl mx-auto px-4 sm:px-6">
                <h2 class="text-3xl font-bold text-stone-800 text-center mb-12">è¯çµ¡æˆ‘å€‘</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
                    <div class="space-y-8">
                        <h3 class="text-xl font-bold text-stone-700 mb-4 border-l-4 border-rose-400 pl-3">åª½å’ªå¿…çœ‹å½±ç‰‡</h3>
                        <div>
                            <div class="video-wrapper shadow-lg"><iframe src="https://www.youtube.com/embed/_b87ma28TzE" allowfullscreen></iframe></div>
                            <p class="text-sm font-bold text-stone-600 mt-2">æœ€å¥½çš„èƒæ•™å°±æ˜¯åª½å’ªå¥½å¿ƒæƒ…</p>
                        </div>
                        <div>
                            <div class="video-wrapper shadow-lg"><iframe src="https://www.youtube.com/embed/7rvoqYs7-e0" allowfullscreen></iframe></div>
                            <p class="text-sm font-bold text-stone-600 mt-2">å­•æœŸå®‰å¿ƒå†¥æƒ³ä¸‰æ—¥ç·´ç¿’</p>
                        </div>
                        <div>
                            <div class="video-wrapper shadow-lg"><iframe src="https://www.youtube.com/embed/8-68Kf0PJb0" allowfullscreen></iframe></div>
                            <p class="text-sm font-bold text-stone-600 mt-2">å­•å©¦ä¸‰åˆ†é˜æƒ…ç·’æ€¥æ•‘åŒ…</p>
                        </div>
                    </div>
                    <div class="flex flex-col h-full">
                        <h3 class="text-xl font-bold text-stone-700 mb-4 border-l-4 border-emerald-400 pl-3">åŠ å…¥æ´‹æ´‹ç¤¾ç¾¤</h3>
                        <div class="bg-stone-50 p-8 rounded-3xl border border-stone-100 text-center flex-1 flex flex-col justify-center items-center sticky top-24">
                            <p class="text-stone-600 mb-6 text-lg">æƒæä¸‹æ–¹ QR Codeï¼Œ<br>ç«‹å³ç²å¾—æ‚¨çš„å°ˆå±¬ AI ç™‚ç™’å¸«ã€‚</p>
                            <div class="w-40 h-40 bg-white p-2 rounded-lg shadow-sm border border-stone-200 mb-8"><img src="https://placehold.co/160x160?text=Line+QR" alt="Line QR Code" class="w-full h-full object-contain"></div>
                            <button class="w-full bg-[#06C755] text-white font-bold py-3 rounded-xl shadow-md hover:bg-[#05b54d] transition flex items-center justify-center gap-2"><span>ğŸ’¬</span> åŠ å…¥ Line å®˜æ–¹å¥½å‹</button>
                            <p class="text-sm text-stone-500 font-bold mt-4">Line ID: @YangYangAI</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <footer class="bg-stone-900 text-stone-400 py-16">
            <div class="max-w-4xl mx-auto px-4 text-center">
                <div class="mb-8"><span class="text-3xl">ğŸ¤°</span></div>
                <h3 class="text-2xl font-bold text-rose-400 mb-4 font-serif">æ´‹æ´‹ Yangyang</h3>
                <p class="mt-12 text-xs text-stone-700">Â© 2025 Yangyang AI Project Proposal.</p>
            </div>
        </footer>
    </div>

    <!-- ========================================== -->
    <!-- APP 2: Momsight -->
    <!-- ========================================== -->
    <div id="app-momsight" class="app-hidden">
        <a id="yang-yang-fab" href="#" onclick="showYangYangModal(event)" class="fixed bottom-6 right-6 z-50 bg-white p-3 rounded-full shadow-xl flex items-center gap-2 border border-orange-100 cursor-pointer hover:bg-orange-50 transition">
            <span class="text-2xl">ğŸ§šâ€â™‚ï¸</span>
            <span class="text-xs font-bold text-accent hidden md:inline">æ‰¾æ´‹æ´‹èŠèŠ</span>
        </a>

        <main class="w-full max-w-lg min-h-screen bg-white shadow-2xl overflow-hidden relative">
            <div class="absolute top-0 left-0 w-full h-48 bg-gradient-to-b from-orange-50 to-white z-0"></div>
            <div class="relative z-10 p-6 md:p-8">
                <header class="text-center mb-8 pt-4">
                    <h1 class="text-3xl font-bold text-accent tracking-wide">Momsight</h1>
                    <p class="text-sm text-gray-500 mt-1">åª½å’ªåŸåŠ›å°èˆª â€¢ å…¨é€±æœŸé™ªä¼´</p>
                </header>

                <section id="section-input" class="animate-slide-up">
                    <div class="bg-white rounded-3xl p-6 card-shadow border border-orange-50 text-center">
                        <span class="text-4xl mb-4 block">ğŸ¤°</span>
                        <h2 class="text-xl font-bold text-gray-700 mb-2">å¦³ç¾åœ¨è™•æ–¼ä»€éº¼éšæ®µï¼Ÿ</h2>
                        <p class="text-sm text-gray-500 mb-6">è¼¸å…¥é ç”¢æœŸæˆ–å¯¶å¯¶ç”Ÿæ—¥ï¼Œè®“æˆ‘å€‘ç‚ºå¦³å®šä½æ™‚ç©ºã€‚</p>
                        <div class="text-left mb-6">
                            <label class="block text-xs font-bold text-gray-400 uppercase mb-2">Date</label>
                            <input type="date" id="target-date" class="w-full p-4 bg-gray-50 rounded-xl border-2 border-transparent focus:border-accent focus:bg-white focus:outline-none transition-colors text-gray-700 font-medium">
                            <p id="error-msg" class="text-xs text-red-500 mt-2 hidden">è«‹é¸æ“‡æ—¥æœŸæ‰èƒ½å•Ÿå‹•å°èˆªå–”ï¼</p>
                        </div>
                        <button onclick="checkDateAndStart()" class="w-full btn-primary py-4 rounded-xl font-bold text-lg">å•Ÿå‹•æ™‚å…‰å°èˆª</button>
                    </div>
                </section>

                <section id="section-quiz" class="hidden animate-fade-in">
                    <div class="flex justify-between items-center mb-6">
                        <span class="text-xs font-bold text-gray-400 uppercase">Quiz Progress</span>
                        <span class="text-xs font-bold text-accent"><span id="q-current">1</span> / 12</span>
                    </div>
                    <div class="w-full h-2 bg-gray-100 rounded-full mb-8 overflow-hidden">
                        <div id="q-bar" class="h-full bg-accent transition-all duration-300" style="width: 0%"></div>
                    </div>
                    <div class="bg-white p-2 mb-4">
                        <h3 id="q-text" class="text-xl font-medium text-gray-800 leading-relaxed mb-8 min-h-[4rem]">é¡Œç›®è¼‰å…¥ä¸­...</h3>
                        <div id="q-options" class="space-y-4"></div>
                    </div>
                </section>

                <section id="section-result" class="hidden animate-slide-up pb-12">
                    <div class="text-center mb-8">
                        <div class="inline-block p-3 rounded-full bg-soft-pink mb-3 shadow-sm"><span class="text-3xl">ğŸ‘‘</span></div>
                        <p class="text-xs font-bold text-gray-400 uppercase tracking-widest">Your Mommy Archetype</p>
                        <h2 id="res-title" class="text-2xl font-bold text-accent mt-1 mb-2"></h2>
                        <div id="res-stage-badge" class="inline-block px-3 py-1 bg-gray-100 text-gray-600 text-xs rounded-full font-medium"></div>
                    </div>
                    <div class="bg-white rounded-2xl p-6 card-shadow border-t-4 border-accent mb-6">
                        <h3 class="font-bold text-gray-800 mb-2 flex items-center"><span class="text-lg mr-2">ğŸ’­</span> å¦³ç¾åœ¨çš„å¿ƒæƒ…å¯«ç…§</h3>
                        <p id="res-stress" class="text-gray-600 text-sm leading-relaxed mb-4"></p>
                        <div class="w-full h-px bg-gray-100 my-4"></div>
                        <h3 class="font-bold text-accent mb-2 flex items-center"><span class="text-lg mr-2">ğŸ’¡</span> çµ¦å¦³çš„æº«é¦¨æé†’</h3>
                        <p id="res-reminder" class="text-gray-700 font-medium leading-relaxed"></p>
                    </div>
                    <div class="bg-gradient-to-br from-[#E9EDC9] to-[#F1F5D6] rounded-2xl p-6 mb-6 relative overflow-hidden">
                        <div class="relative z-10">
                            <p class="text-xs font-bold text-[#5F6F52] opacity-70 uppercase mb-1">Relaxation Tip</p>
                            <h4 class="font-bold text-[#4A573B] text-lg mb-2">ä»Šæ—¥èˆ’å£“å°èª</h4>
                            <p id="res-action" class="text-[#4A573B] text-sm"></p>
                        </div>
                        <div class="absolute -bottom-4 -right-4 w-24 h-24 bg-white opacity-20 rounded-full"></div>
                    </div>
                    <div class="bg-white rounded-2xl p-5 border border-gray-100 shadow-sm mb-6 flex items-start gap-4">
                        <div class="text-3xl">ğŸ§šâ€â™‚ï¸</div>
                        <div>
                            <h4 class="font-bold text-gray-800 text-sm">è¦ºå¾—æ²’äººæ‡‚å¦³ï¼Ÿ</h4>
                            <p class="text-xs text-gray-500 mt-1 mb-3">æ´‹æ´‹åœ¨ App è£¡éš¨æ™‚è½å¦³èªªã€‚é‡å°å¦³çš„æ€§æ ¼ï¼Œæˆ‘æº–å‚™äº†å°ˆå±¬çš„ç™‚ç™’è™•æ–¹ã€‚</p>
                            <button onclick="showYangYangModal(event)" class="text-xs font-bold text-accent hover:underline flex items-center">
                                é–‹å•Ÿæ´‹æ´‹ App é ˜å–è™•æ–¹ <svg class="w-3 h-3 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                            </button>
                        </div>
                    </div>
                    <button onclick="showSosModal()" class="w-full btn-outline py-3 rounded-xl font-bold text-sm mb-4">ğŸš¨ å‚³é€ã€ŒéšŠå‹ä½¿ç”¨èªªæ˜æ›¸ã€</button>
                    <button onclick="resetTest()" class="w-full bg-gray-100 text-gray-500 py-3 rounded-xl font-bold text-sm hover:bg-gray-200 transition-colors">ğŸ”„ ä»Šå¤©æ„Ÿè¦ºä¸ä¸€æ¨£ï¼Ÿé‡æ–°æ¸¬é©—</button>
                </section>
            </div>
        </main>

        <div id="modal-yang" class="fixed inset-0 bg-black/60 backdrop-blur-sm hidden z-50 flex items-center justify-center p-4">
            <div class="bg-white rounded-3xl p-6 w-full max-w-sm text-center animate-fade-in relative">
                <button onclick="closeModal('modal-yang')" class="absolute top-4 right-4 text-gray-300 hover:text-gray-500">âœ•</button>
                <div class="w-16 h-16 bg-orange-50 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl">â˜€ï¸</div>
                <h3 class="text-xl font-bold text-gray-800 mb-2">æ´‹æ´‹ - æ‡‚å¦³çš„ AI å¤¥ä¼´</h3>
                <p class="text-sm text-gray-500 mb-6">ç„¡è«–æ˜¯åŠå¤œé¤µå¥¶é‚„æ˜¯ç”¢æª¢ç„¦æ…®ï¼Œæ´‹æ´‹ 24 å°æ™‚éƒ½åœ¨ã€‚é€™æ˜¯å°ˆç‚ºåª½å’ªè¨­è¨ˆçš„æƒ…ç·’é¿é¢¨æ¸¯ã€‚</p>
                <div class="space-y-3">
                    <a href="https://apps.apple.com/tw/app/herehear-3d%E8%99%9B%E6%93%AC%E7%99%82%E7%99%92%E5%B8%AB%E6%B4%8B%E6%B4%8B/id6472772767" target="_blank" class="block w-full py-3 bg-gray-900 text-white rounded-xl font-bold text-sm hover:opacity-90 shadow-md">App Store ä¸‹è¼‰ (iOS)</a>
                    <a href="https://play.google.com/store/apps/details?id=com.BambooTechnology.HereHearaAndroid&hl=zh_TW&pli=1" target="_blank" class="block w-full py-3 bg-gray-100 text-gray-800 rounded-xl font-bold text-sm hover:bg-gray-200 border border-gray-200">Google Play ä¸‹è¼‰ (Android)</a>
                </div>
            </div>
        </div>

        <div id="modal-sos" class="fixed inset-0 bg-black/60 backdrop-blur-sm hidden z-50 flex items-center justify-center p-4">
            <div class="bg-white rounded-3xl p-6 w-full max-w-sm text-center animate-fade-in relative">
                <button onclick="closeModal('modal-sos')" class="absolute top-4 right-4 text-gray-300 hover:text-gray-500">âœ•</button>
                <h3 class="text-lg font-bold text-accent mb-4">ğŸ“¢ çµ¦éšŠå‹çš„æ±‚æ•‘ä¿¡è™Ÿ</h3>
                <div id="sos-content" class="bg-soft-pink p-5 rounded-xl text-left text-sm text-gray-700 leading-relaxed mb-4 font-medium whitespace-pre-wrap"></div>
                <button id="btn-copy" class="w-full btn-primary py-3 rounded-xl font-bold text-sm">ä¸€éµè¤‡è£½å‚³çµ¦è€å…¬</button>
            </div>
        </div>
    </div>

    <!-- ========================================== -->
    <!-- Logic Scripts -->
    <!-- ========================================== -->
    <script>
        function switchApp(appName) {
            const yangApp = document.getElementById('app-yangyang');
            const momApp = document.getElementById('app-momsight');
            const btnYang = document.getElementById('btn-yang');
            const btnMom = document.getElementById('btn-momsight');
            if (appName === 'yangyang') {
                yangApp.classList.remove('app-hidden');
                momApp.classList.add('app-hidden');
                btnYang.classList.add('active');
                btnMom.classList.remove('active');
            } else {
                yangApp.classList.add('app-hidden');
                momApp.classList.remove('app-hidden');
                btnYang.classList.remove('active');
                btnMom.classList.add('active');
            }
        }

        // --- 1. Yangyang Logic ---
        {
            const strategies = [
                { id: 'roleplay', icon: 'ğŸ‘¶', title: 'å¯¶å¯¶ç¿»è­¯æ©Ÿ', subtitle: 'Roleplay Feature', desc: 'å°‡æŠ½è±¡çš„èƒå…’å…·è±¡åŒ–ï¼Œå»ºç«‹æœ€å¼·æƒ…æ„Ÿé€£çµã€‚', tag: 'High Engagement', insight: 'å°‡ã€Œå­¤è»å¥®æˆ°ã€è½‰åŒ–ç‚ºã€Œæ¯å­é€£å¿ƒã€çš„åœ˜éšŠæ„Ÿã€‚', render: renderBabyTranslator },
                { id: 'night', icon: 'ğŸŒ™', title: 'æ·±å¤œå¤±çœ ä¿±æ¨‚éƒ¨', subtitle: 'Night Mode', desc: 'é‡å°å‡Œæ™¨ 2-4 é»çš„ç„¦æ…®é«˜å³°ï¼Œæä¾›ä¸€éµå®‰æ’«ã€‚', tag: 'Core Retention', insight: 'å¡«è£œä¼´ä¾¶ç†Ÿç¡æ™‚çš„ã€Œæƒ…æ„ŸçœŸç©ºæœŸã€ã€‚', render: renderNightMode },
                { id: 'dad', icon: 'ğŸ¦¸â€â™‚ï¸', title: 'çˆ¸çˆ¸ç¥éšŠå‹ç‰¹è¨“', subtitle: 'Gamified Levels', desc: 'Level 1-10 é—–é—œæŒ‘æˆ°ï¼Œåæ˜ ä¸åŒå­•æœŸç‹€æ³ã€‚', tag: 'Viral Growth', insight: 'è®“çˆ¸çˆ¸åœ¨éŠæˆ²ä¸­å­¸ç¿’ï¼Œç†è§£åª½åª½çš„çœŸå¯¦éœ€æ±‚ã€‚', render: renderDadMission },
                { id: 'diary', icon: 'ğŸ“”', title: 'å¯¶å¯¶é€±è¨˜ & å¿ƒéˆèªéŒ„', subtitle: 'Memory & Comfort', desc: 'ç„¡å£“åŠ›çš„æ–‡å­—å°è©±å¼•å°ï¼Œæ­é…æš–å¿ƒèªéŒ„ã€‚', tag: 'Social Share', insight: 'æ¯å¤©ä¸€å¥é¼“å‹µï¼Œæé†’åª½åª½èˆ‡å¯¶å¯¶å°è©±ã€‚', render: renderDiary },
                { id: 'venting', icon: 'ğŸŒ³', title: 'æƒ…ç·’æ¨¹æ´ & æ˜Ÿåº§', subtitle: 'Safe Space & Fun', desc: 'æ˜Ÿåº§åˆ†æå¢åŠ è¶£å‘³æ€§ï¼Œæä¾›çµ•å°ä¿å¯†çš„å®£æ´©å‡ºå£ã€‚', tag: 'Trust Building', insight: 'çµåˆæ˜Ÿåº§è©±é¡Œï¼Œæé†’åª½åª½æœ‰æƒ…ç·’å¯ä»¥å¤§è²èªªå‡ºä¾†ã€‚', render: renderTreeHole }
            ];

            let currentStrategyIndex = 0;
            const momQuotes = ["è¦ªæ„›çš„ï¼Œå¦³ç¾åœ¨çš„èº«é«”æ­£åœ¨é€²è¡Œä¸€å ´å‰å¤§çš„å·¥ç¨‹ï¼Œè¾›è‹¦äº†ã€‚", "ä¸å¿…ç•¶å®Œç¾çš„åª½åª½ï¼Œåªè¦ç•¶å¿«æ¨‚çš„åª½åª½ã€‚", "æ¯ä¸€æ¬¡çš„èƒå‹•ï¼Œéƒ½æ˜¯å¯¶å¯¶åœ¨èªªã€æˆ‘æ„›å¦³ã€ã€‚", "å¦³çš„æƒ…ç·’æ²’æœ‰å°éŒ¯ï¼Œæƒ³å“­å°±å“­ï¼Œæƒ³ç¬‘å°±ç¬‘ã€‚", "å¯¶å¯¶é¸æ“‡äº†å¦³ï¼Œæ˜¯å› ç‚ºå¦³å°±æ˜¯å…¨ä¸–ç•Œæœ€é©åˆä»–çš„åª½åª½ã€‚", "é€™ä¸€åˆ»çš„æ··äº‚èˆ‡ç–²æ†Šï¼Œéƒ½æ˜¯ç‚ºäº†è¿æ¥æœ€ç¾å¥½çš„ç›¸é‡ã€‚", "åˆ¥å¿˜äº†åœ¨æ„›å¯¶å¯¶ä¹‹å‰ï¼Œå…ˆå¥½å¥½æ„›è‡ªå·±ã€‚", "å¦³çš„èº«é«”å¾ˆç¾ï¼Œå› ç‚ºå®ƒæ­£åœ¨å­•è‚²ç”Ÿå‘½ã€‚", "ç„¦æ…®ä¹Ÿæ²’é—œä¿‚ï¼Œæˆ‘å€‘æ…¢æ…¢ä¾†ï¼Œä¸€å¤©éå¥½ä¸€å¤©ã€‚", "å¦³ä¸æ˜¯ä¸€å€‹äººåœ¨æˆ°é¬¥ï¼Œæ´‹æ´‹ä¸€ç›´éƒ½åœ¨ã€‚", "ç›¸ä¿¡å¦³çš„ç›´è¦ºï¼Œå¦³æ¯”ä»»ä½•äººéƒ½æ‡‚å¦³çš„å¯¶å¯¶ã€‚", "æ”¾é¬†è‚©è†€ï¼Œæ·±å‘¼å¸ï¼Œå¦³åšå¾—å·²ç¶“å¤ å¥½äº†ã€‚"];
            let currentQuoteIndex = 0;
            let dadLevel = 1;
            const dadGameLevels = [
                { level: 1, title: "Level 1: æ‡·å­•åˆæœŸ", questions: [{ q: "åª½åª½æœ€è¿‘åˆ·ç‰™æ™‚å®¹æ˜“ä¹¾å˜”ï¼Œé€™æ™‚å€™ä½ è©²ï¼Ÿ", options: ["å«å¥¹å¿è€ä¸€ä¸‹", "éä¸Šæº«æ°´ï¼Œè¼•æ‹èƒŒéƒ¨", "èªªæˆ‘åˆ·ç‰™ä¹Ÿæœƒè€¶"], ans: 1, reply: "æ²’éŒ¯ï¼åˆæœŸçš„å­•åéå¸¸é›£å—ï¼Œæº«æŸ”é™ªä¼´æœ€é‡è¦ã€‚" }] },
                { level: 2, title: "Level 2: æƒ…ç·’é¢¨æš´", questions: [{ q: "åª½åª½çœ‹è‘—é›»è¦–å»£å‘Šçªç„¶å“­äº†ï¼Œä½ è©²ï¼Ÿ", options: ["éä¸Šé¢ç´™ï¼ŒæŠ±æŠ±å¥¹", "ç¬‘å¥¹å¤ªèª‡å¼µ", "ç†æ€§åˆ†æå»£å‘Š"], ans: 0, reply: "è³€çˆ¾è’™å½±éŸ¿ä¸‹ï¼Œæƒ…ç·’èµ·ä¼æ˜¯æ­£å¸¸çš„ã€‚æ“æŠ±å‹éåƒè¨€è¬èªã€‚" }] },
                { level: 3, title: "Level 3: èº«é«”è®ŠåŒ–", questions: [{ q: "åª½åª½æŠ±æ€¨ä»¥å‰çš„ç‰›ä»”è¤²ç©¿ä¸ä¸‹äº†ï¼Œä½ èªªï¼Ÿ", options: ["é‚£å°±è²·æ–°çš„å•Š", "é€™ä»£è¡¨å¯¶å¯¶é•·å¤§äº†ï¼Œæˆ‘å€‘å»è²·å­•å©¦è£ï¼", "å¦³è®Šèƒ–äº†"], ans: 1, reply: "æ¼‚äº®ï¼æŠŠç„¦é»è½‰ç§»åˆ°å¯¶å¯¶æˆé•·å’Œè³¼ç‰©æ¨‚è¶£ï¼Œé¿é–‹ã€èƒ–ã€é€™å€‹å­—ã€‚" }] },
                { level: 4, title: "Level 4: èƒå‹•åˆé«”é©—", questions: [{ q: "åª½åª½èˆˆå¥®åœ°æŠ“ä½ çš„æ‰‹æ‘¸è‚šå­ï¼Œä½†ä½ ä»€éº¼éƒ½æ²’æ„Ÿè¦ºåˆ°...", options: ["å‡è£æ„Ÿè¦ºåˆ°äº†", "èª å¯¦èªªæ²’æœ‰ï¼Œä½†è€å¿ƒç­‰å¾…", "èªªå¦³æƒ³å¤ªå¤š"], ans: 1, reply: "èª å¯¦è€Œæº«æŸ”ã€‚ä½ çš„æ‰‹æŒæº«åº¦å°åª½åª½å’Œå¯¶å¯¶éƒ½æ˜¯å®‰æ…°ã€‚" }] },
                { level: 5, title: "Level 5: ç¡çœ å›°æ“¾", questions: [{ q: "åª½åª½åŠå¤œç¿»ä¾†è¦†å»ç¡ä¸è‘—ï¼Œå› ç‚ºæ‰¾ä¸åˆ°èˆ’æœå§¿å‹¢...", options: ["è‡ªå·±ç¡è‡ªå·±çš„", "å¹«å¥¹èª¿æ•´å­•å©¦æ•ï¼ŒæŒ‰æ‘©å°è…¿", "å«å¥¹ä¸è¦å‹•"], ans: 1, reply: "ç¥éšŠå‹ï¼é€™æ™‚æœŸçš„ç¡çœ å“è³ªå¾ˆå·®ï¼Œä¸»å‹•å”åŠ©èª¿æ•´æ•é ­è¶…åŠ åˆ†ã€‚" }] },
                { level: 6, title: "Level 6: é »å°¿åœ°ç„", questions: [{ q: "å‡ºé–€é€›è¡—ï¼Œåª½åª½æ¯30åˆ†é˜å°±è¦æ‰¾å»æ‰€...", options: ["ä¸è€ç…©åœ°å˜†æ°£", "ä¸»å‹•æœå°‹é™„è¿‘ä¹¾æ·¨å»æ‰€", "å«å¥¹å°‘å–æ°´"], ans: 1, reply: "å­å®®å£“è¿«è†€èƒ±æ˜¯ç”Ÿç†ç¾è±¡ã€‚ä¸»å‹•æ‰¾å»æ‰€å±•ç¾ä½ çš„é«”è²¼ï¼" }] },
                { level: 7, title: "Level 7: æ°´è…«èˆ‡æŠ½ç­‹", questions: [{ q: "åª½åª½çš„è…³è…«å¾—åƒéºµåŒ…ï¼Œé‹å­ç©¿ä¸ä¸‹...", options: ["ç¬‘å¥¹çš„è…³å¥½å¤§", "æ¯æ™šå¹«å¿™æŠ¬è…¿æŒ‰æ‘©ï¼Œè²·å¤§ä¸€è™Ÿèˆ’é©é‹", "æ²’è¾¦æ³•"], ans: 1, reply: "æŒ‰æ‘©æ˜¯çˆ¸çˆ¸çš„å¿…ä¿®èª²ï¼é€™èƒ½æœ‰æ•ˆç·©è§£æ°´è…«ä¸é©ã€‚" }] },
                { level: 8, title: "Level 8: ç”¢å‰ç„¦æ…®", questions: [{ q: "åª½åª½ä¸€ç›´æ“”å¿ƒã€ç”Ÿä¸å‡ºä¾†æ€éº¼è¾¦ã€ã€ã€å¥½ç—›æ€éº¼è¾¦ã€...", options: ["èˆ¹åˆ°æ©‹é ­è‡ªç„¶ç›´", "é™ªå¥¹ç·´ç¿’å‘¼å¸æ³•ï¼Œè¤‡ç¿’ç”Ÿç”¢è¨ˆç•«", "åˆ¥æƒ³é‚£éº¼å¤š"], ans: 1, reply: "ç„¦æ…®éœ€è¦è¢«å…·é«”è¡Œå‹•åŒ–è§£ã€‚ä¸€èµ·ç·´ç¿’æ‹‰æ¢…èŒ²å‘¼å¸å§ï¼" }] },
                { level: 9, title: "Level 9: å¾…ç”¢åŒ…æª¢æŸ¥", questions: [{ q: "è¦æº–å‚™å»é†«é™¢äº†ï¼Œè­‰ä»¶å’Œå¾…ç”¢åŒ…æ˜¯èª°çš„è²¬ä»»ï¼Ÿ", options: ["ç•¶ç„¶æ˜¯åª½åª½è‡ªå·±æ”¶", "çˆ¸çˆ¸è¦ç¢ºèªæ‰€æœ‰è­‰ä»¶èˆ‡æ¸…å–®", "åˆ°æ™‚å€™å†èªª"], ans: 1, reply: "é€™æ™‚å€™åª½åª½å·²ç¶“å¾ˆä¸èˆ’æœäº†ï¼Œçˆ¸çˆ¸è² è²¬å¾Œå‹¤æ˜¯å¿…é ˆçš„ï¼" }] },
                { level: 10, title: "Level 10: å¸è²¨å€’æ•¸", questions: [{ q: "é™£ç—›é–‹å§‹äº†ï¼åª½åª½ç—›å¾—å¤§å«...", options: ["æ…Œå¼µåœ°å¤§å«", "å†·éœè¨˜éŒ„é™£ç—›é »ç‡ï¼Œæ¡è‘—å¥¹çš„æ‰‹", "å«å¥¹å°è²é»"], ans: 1, reply: "ä½ æ˜¯æœ€æ£’çš„æŒ‡æ®å®˜ï¼å†·éœèˆ‡é™ªä¼´æ˜¯ç”¢æˆ¿è£¡æœ€å¼·å¤§çš„åŠ›é‡ã€‚" }] }
            ];
            const zodiacSigns = [{ val: "aries", name: "ç‰¡ç¾Šåº§", elem: "fire" }, { val: "taurus", name: "é‡‘ç‰›åº§", elem: "earth" }, { val: "gemini", name: "é›™å­åº§", elem: "air" }, { val: "cancer", name: "å·¨èŸ¹åº§", elem: "water" }, { val: "leo", name: "ç…å­åº§", elem: "fire" }, { val: "virgo", name: "è™•å¥³åº§", elem: "earth" }, { val: "libra", name: "å¤©ç§¤åº§", elem: "air" }, { val: "scorpio", name: "å¤©è åº§", elem: "water" }, { val: "sagittarius", name: "å°„æ‰‹åº§", elem: "fire" }, { val: "capricorn", name: "æ‘©ç¾¯åº§", elem: "earth" }, { val: "aquarius", name: "æ°´ç“¶åº§", elem: "air" }, { val: "pisces", name: "é›™é­šåº§", elem: "water" }];

            window.scrollToSection = function(id) { document.getElementById(id).scrollIntoView({ behavior: 'smooth' }); };
            window.loadStrategy = function(index) {
                currentStrategyIndex = index;
                const strategy = strategies[index];
                document.querySelectorAll('#app-yangyang .feature-card').forEach(el => el.classList.remove('active'));
                document.getElementById(`tab-${index}`).classList.add('active');
                document.getElementById('demoTitle').innerText = strategy.title;
                document.getElementById('demoDesc').innerText = strategy.desc;
                document.getElementById('demoTag').innerText = strategy.tag;
                document.getElementById('demoInsight').innerText = strategy.insight;
                const contentContainer = document.getElementById('demoContent');
                contentContainer.innerHTML = '';
                contentContainer.style.opacity = '0';
                setTimeout(() => { strategy.render(contentContainer); contentContainer.style.opacity = '1'; }, 100);
            };
            function renderStrategyTabs() {
                const container = document.getElementById('strategyTabs');
                container.innerHTML = strategies.map((s, index) => `
                    <div onclick="loadStrategy(${index})" class="feature-card cursor-pointer p-4 rounded-xl border border-stone-100 bg-white hover:border-rose-200 transition-all duration-300 flex items-center gap-4 group ${index === currentStrategyIndex ? 'active' : ''}" id="tab-${index}">
                        <div class="w-12 h-12 rounded-full bg-stone-50 flex items-center justify-center text-2xl group-hover:bg-rose-100 group-hover:text-rose-500 transition-colors">${s.icon}</div>
                        <div class="flex-1"><h3 class="font-bold text-stone-700 text-sm group-hover:text-rose-600 transition-colors">${s.title}</h3><p class="text-xs text-stone-400 mt-0.5 font-light">${s.subtitle}</p></div><div class="text-stone-300">â€º</div>
                    </div>`).join('');
            }
            function renderBabyTranslator(container) {
                container.innerHTML = `<div class="w-full max-w-lg"><div class="bg-white rounded-2xl shadow-sm border border-stone-100 overflow-hidden"><div class="bg-gradient-to-r from-rose-50 to-orange-50 p-6 text-center relative overflow-hidden"><div class="absolute top-0 right-0 p-4 opacity-10 text-6xl">ğŸ‘¶</div><div class="inline-block bg-white/80 backdrop-blur px-3 py-1 rounded-full text-xs font-bold text-rose-500 mb-2 shadow-sm">æ‡·å­•ç¬¬ <span id="weekNum">24</span> é€±</div><div class="text-6xl my-4 transition-transform duration-500 hover:scale-110 cursor-default" id="fruitIcon">ğŸ¥­</div><p class="text-sm text-stone-500" id="fruitText">å¯¶å¯¶ç¾åœ¨åƒä¸€é¡†<span class="font-bold text-stone-700">èŠ’æœ</span>ä¸€æ¨£å¤§å›‰ï¼</p></div><div class="p-6"><div class="bg-stone-50 rounded-xl p-4 relative mb-6"><div class="absolute -top-3 left-4 bg-rose-500 text-white text-[10px] px-2 py-0.5 rounded shadow-sm">å¯¶å¯¶å‚³ä¾†çš„è¨Šæ¯</div><p class="text-stone-700 leading-relaxed text-sm pt-2 italic" id="babyMsg">"åª½åª½ï¼Œæˆ‘ç¾åœ¨è½å¾—åˆ°å¦³çš„è²éŸ³å›‰ï¼å‰›å‰›é‚£é¦–éŸ³æ¨‚å¥½å¥½è½ï¼Œæˆ‘é‚„è¸¢äº†å¦³ä¸€ä¸‹ï¼Œå¦³æœ‰æ„Ÿè¦ºåˆ°å—ï¼Ÿ"</p></div><div class="flex items-center gap-4"><span class="text-xs text-stone-400">èª¿æ•´é€±æ•¸</span><input type="range" min="8" max="40" value="24" class="flex-1 h-2 bg-stone-200 rounded-lg appearance-none cursor-pointer accent-rose-500" id="weekSlider"></div></div></div></div>`;
                document.getElementById('weekSlider').addEventListener('input', (e) => { const val = parseInt(e.target.value); document.getElementById('weekNum').innerText = val; updateBabyContent(val); });
            }
            function updateBabyContent(week) {
                 const icon = document.getElementById('fruitIcon'); const text = document.getElementById('fruitText'); const msg = document.getElementById('babyMsg');
                 if(week < 12) { icon.innerText = "ğŸ‡"; text.innerHTML = "å¯¶å¯¶ç¾åœ¨åƒä¸€é¡†<span class='font-bold text-stone-700'>è‘¡è„</span>ï¼"; msg.innerText = "\"æˆ‘é‚„å°å°çš„ï¼Œä½†æˆ‘æ­£åœ¨åŠªåŠ›é•·å‡ºæ‰‹æŒ‡é ­å–”ï¼åª½åª½å¤šåƒé»è‘‰é…¸ï¼Œæˆ‘æœƒæ›´å¼·å£¯ï¼\""; } 
                 else if(week < 20) { icon.innerText = "ğŸ¥‘"; text.innerHTML = "å¯¶å¯¶ç¾åœ¨åƒä¸€é¡†<span class='font-bold text-stone-700'>é…ªæ¢¨</span>ï¼"; msg.innerText = "\"åª½åª½ï¼Œæˆ‘é–‹å§‹æœƒç¿»èº«å›‰ï¼æœ‰æ™‚å€™è‚šå­å’•åš•å’•åš•çš„ï¼Œé‚£å…¶å¯¦æ˜¯æˆ‘åœ¨æ¸¸æ³³å–”ï¼\""; } 
                 else if(week < 30) { icon.innerText = "ğŸ¥­"; text.innerHTML = "å¯¶å¯¶ç¾åœ¨åƒä¸€é¡†<span class='font-bold text-stone-700'>èŠ’æœ</span>ï¼"; msg.innerText = "\"åª½åª½ï¼Œæˆ‘è½å¾—åˆ°å¤–é¢çš„è²éŸ³äº†ã€‚å‰›å‰›çˆ¸çˆ¸èªªè©±çš„è²éŸ³ä½ä½çš„ï¼Œå¥½åƒå¤§æç´å–”ï¼\""; } 
                 else { icon.innerText = "ğŸ‰"; text.innerHTML = "å¯¶å¯¶ç¾åœ¨åƒä¸€é¡†<span class='font-bold text-stone-700'>è¥¿ç“œ</span>ï¼"; msg.innerText = "\"é€™è£¡è®Šå¾—å¥½æ“ å–”ï½ä½†æˆ‘å·²ç¶“æº–å‚™å¥½è¦è¦‹å¦³äº†ï¼åª½åª½åˆ¥æ€•ï¼Œæˆ‘å€‘ä¸€èµ·åŠ æ²¹ï¼\""; }
            }
            function renderNightMode(container) {
                 container.innerHTML = `<div class="w-full max-w-md aspect-[4/5] bg-stone-900 rounded-3xl relative overflow-hidden shadow-2xl flex flex-col items-center justify-center transition-colors duration-1000"><div class="relative z-10 text-center w-full px-8" id="nightState1"><div class="text-stone-500 text-sm mb-8 tracking-widest uppercase">3:42 AM â€¢ å¤±çœ æ¨¡å¼</div><button id="activateNightBtn" class="group relative inline-flex items-center justify-center w-20 h-20 bg-stone-800 rounded-full text-3xl shadow-lg border border-stone-700 text-stone-400 hover:text-rose-400 hover:border-rose-900 transition-all duration-500">ğŸŒ™ <span class="absolute w-full h-full rounded-full border border-rose-500/30 opacity-0 group-hover:animate-ping"></span></button><p class="text-stone-500 mt-6 text-xs">é»æ“Šå•Ÿå‹•å®‰æ’«å¼•å°</p></div><div id="nightState2" class="hidden text-center"><div class="w-40 h-40 mx-auto bg-rose-500/20 rounded-full flex items-center justify-center mb-8 relative"><div class="w-24 h-24 bg-rose-500/40 rounded-full absolute breathing-circle"></div><div class="w-4 h-4 bg-rose-400 rounded-full shadow-lg z-10"></div></div><p class="text-rose-200/80 text-lg font-light tracking-wide mb-2">"æ…¢æ…¢å¸æ°£..."</p><button onclick="loadStrategy(1)" class="mt-12 text-xs text-stone-600 hover:text-stone-400 border border-stone-800 px-3 py-1 rounded-full">çµæŸå¼•å°</button></div></div>`;
                 document.getElementById('activateNightBtn').addEventListener('click', () => { document.getElementById('nightState1').style.display = 'none'; document.getElementById('nightState2').classList.remove('hidden'); });
            }
            function renderDadMission(container) {
                const levelData = dadGameLevels[dadLevel-1] || dadGameLevels[0]; const qData = levelData.questions[0]; 
                container.innerHTML = `<div class="w-full max-w-md bg-white rounded-2xl shadow-lg border border-indigo-50 overflow-hidden"><div class="bg-indigo-600 p-4 flex justify-between items-center text-white"><div class="flex items-center gap-2"><span class="text-xl">ğŸ¦¸â€â™‚ï¸</span><span class="font-bold text-sm">ç¥éšŠå‹ç‰¹è¨“</span></div><span class="text-xs bg-indigo-500 px-2 py-1 rounded">${levelData.title}</span></div><div class="p-6" id="quizState"><div class="mb-4 text-xs text-stone-400 flex justify-between"><span>Level ${dadLevel}</span><span>Level 10</span></div><div class="w-full bg-stone-100 h-1.5 rounded-full mb-6"><div class="bg-indigo-500 h-1.5 rounded-full" style="width: ${(dadLevel/10)*100}%"></div></div><p class="text-stone-800 font-bold mb-2">æƒ…å¢ƒæŒ‘æˆ°</p><p class="text-stone-600 font-medium mb-4 text-sm">${qData.q}</p><div class="space-y-3">${qData.options.map((opt, idx) => `<button onclick="checkDadAnswer(${idx}, ${qData.ans}, '${qData.reply.replace(/'/g, "\\'")}')" class="w-full text-left p-3 rounded-xl border border-stone-200 hover:bg-indigo-50 transition text-sm font-medium text-stone-700">${String.fromCharCode(65+idx)}. ${opt}</button>`).join('')}</div></div><div class="p-6 hidden text-center" id="resultState"><div class="text-5xl mb-4" id="resultIcon"></div><h3 class="text-xl font-bold mb-2" id="resultTitle"></h3><p class="text-sm text-stone-600 bg-indigo-50 p-4 rounded-lg mb-4" id="resultDesc"></p><button onclick="nextDadLevel()" class="w-full bg-indigo-600 text-white py-3 rounded-xl font-bold hover:bg-indigo-700 shadow-md">${dadLevel < 10 ? 'å‰å¾€ä¸‹ä¸€é—œ' : 'æ­å–œé€šé—œï¼'}</button></div></div>`;
            }
            window.checkDadAnswer = function(selected, correct, reply) {
                const quiz = document.getElementById('quizState'); const result = document.getElementById('resultState'); quiz.classList.add('hidden'); result.classList.remove('hidden'); const icon = document.getElementById('resultIcon'); const title = document.getElementById('resultTitle');
                if (selected === correct) { icon.innerText = "ğŸ‰"; title.innerText = "æ­£ç¢ºåˆ¤æ–·ï¼"; title.className = "text-xl font-bold mb-2 text-emerald-600"; } else { icon.innerText = "ğŸ˜…"; title.innerText = "å†æƒ³ä¸€æƒ³..."; title.className = "text-xl font-bold mb-2 text-stone-600"; }
                document.getElementById('resultDesc').innerText = reply;
            }
            window.nextDadLevel = function() { if (dadLevel < 10) dadLevel++; else dadLevel = 1; renderDadMission(document.getElementById('demoContent')); }
            function renderDiary(container) {
                 container.innerHTML = `<div class="w-full max-w-sm bg-stone-50 p-4 rounded-lg border border-stone-200"><div class="bg-white p-5 rounded-xl shadow-sm border border-stone-100 mb-5 relative overflow-hidden"><h4 class="font-bold text-stone-800 flex items-center gap-2 mb-3"><span class="text-xl">ğŸ¤±</span> æ¯é€±æ‚„æ‚„è©±æ™‚é–“</h4><p class="text-sm text-stone-600 leading-relaxed mb-4">åª½å’ªï¼Œé€™é€±æœ‰ç™¼ç”Ÿä»€éº¼æƒ³è·Ÿå¯¶å¯¶åˆ†äº«çš„äº‹å—ï¼Ÿè©¦è‘—æŠŠé€™äº›å¿ƒæƒ…<span class="text-rose-500 font-bold">æ‰“é–‹æ´‹æ´‹ï¼Œè®“æ´‹æ´‹å¹«ä½ è¨˜ä¸‹</span>ã€‚</p></div><div class="bg-gradient-to-br from-rose-500 to-rose-400 p-6 rounded-xl shadow-lg text-white text-center relative"><p class="font-medium text-lg mb-4 min-h-[5rem] flex items-center justify-center" id="quoteText">${momQuotes[currentQuoteIndex]}</p><button onclick="nextQuote()" class="bg-white/20 hover:bg-white/30 text-white text-xs px-4 py-2 rounded-full backdrop-blur-sm transition border border-white/30">æ›ä¸€å¥é¼“å‹µ â¤ï¸</button></div></div>`;
            }
            window.nextQuote = function() { currentQuoteIndex = (currentQuoteIndex + 1) % momQuotes.length; document.getElementById('quoteText').innerText = momQuotes[currentQuoteIndex]; }
            function renderTreeHole(container) {
                const momOpts = zodiacSigns.map(z => `<option value="${z.elem}">${z.name}</option>`).join(''); const babyOpts = zodiacSigns.map(z => `<option value="${z.elem}">${z.name}</option>`).join('');
                container.innerHTML = `<div class="w-full max-w-md bg-white p-6 rounded-2xl border border-stone-100 h-[420px] flex flex-col justify-center"><h3 class="text-sm font-bold text-stone-700 mb-6 flex items-center gap-2"><span>ğŸ”®</span> æ˜Ÿåº§åª½å’ª x æ˜Ÿåº§å¯¶å¯¶</h3><div class="grid grid-cols-2 gap-4 mb-6"><div><label class="text-xs text-stone-500 block mb-1">åª½å’ªæ˜Ÿåº§</label><select id="momSign" class="w-full p-2 border rounded-lg bg-stone-50">${momOpts}</select></div><div><label class="text-xs text-stone-500 block mb-1">å¯¶å¯¶æ˜Ÿåº§</label><select id="babySign" class="w-full p-2 border rounded-lg bg-stone-50">${babyOpts}</select></div></div><button onclick="analyzeHoroscope()" class="w-full bg-indigo-500 hover:bg-indigo-600 text-white py-3 rounded-lg font-bold mb-4 transition shadow-md">ç«‹å³åˆ†æç›¸è™•æ¨¡å¼</button><div id="horoscopeResult" class="bg-indigo-50 p-4 rounded-xl text-center text-sm text-indigo-900 opacity-0 transition-opacity"></div></div>`;
            }
            window.analyzeHoroscope = function() {
                const mElem = document.getElementById('momSign').value; const bElem = document.getElementById('babySign').value; const res = document.getElementById('horoscopeResult'); let text = "";
                if (mElem === bElem) text = "ä½ å€‘æ“æœ‰çµ•ä½³é»˜å¥‘ï¼åª½å’ªèˆ‡å¯¶å¯¶é »ç‡ä¸€è‡´ï¼Œæ˜¯æœ€æ‡‚å½¼æ­¤çš„éˆé­‚ä¼´ä¾¶ã€‚"; else if ((mElem==='fire' && bElem==='air') || (mElem==='air' && bElem==='fire')) text = "ç†±æƒ…èˆ‡å‰µæ„çš„ç«èŠ±ï¼ä½ å€‘çš„ç”Ÿæ´»å°‡å……æ»¿æ­¡ç¬‘èˆ‡é©šå–œï¼Œæ˜¯æœ€ä½³ç©ä¼´ã€‚"; else if ((mElem==='earth' && bElem==='water') || (mElem==='water' && bElem==='earth')) text = "æº«æŸ”èˆ‡å®‰å®šçš„å®ˆè­·ã€‚ä½ å€‘èƒ½çµ¦äºˆå½¼æ­¤æœ€æ·±å±¤çš„å®‰å…¨æ„Ÿèˆ‡æ»‹é¤Šã€‚"; else text = "äº’è£œå­¸ç¿’çš„å¥½éšŠå‹ï¼ä¸åŒçš„å€‹æ€§å°‡å¸¶é ˜å½¼æ­¤çœ‹è¦‹æ›´å¯¬å»£çš„ä¸–ç•Œã€‚";
                res.innerHTML = `<span class="font-bold">æ´‹æ´‹åˆ†æï¼š</span>${text}`; res.style.opacity = 1;
            }
            document.addEventListener('DOMContentLoaded', () => {
                renderStrategyTabs(); loadStrategy(0);
                if(document.getElementById('anxietyCurveChart')) { new Chart(document.getElementById('anxietyCurveChart').getContext('2d'), { type: 'line', data: { labels: ['08:00', '12:00', '16:00', '20:00', '00:00', '02:00', '04:00', '06:00'], datasets: [{ label: 'å­•æœŸç„¦æ…®æŒ‡æ•¸', data: [30, 40, 35, 50, 80, 95, 85, 45], borderColor: 'rgb(251, 113, 133)', fill: true }] }, options: { maintainAspectRatio: false, scales: { y: { display: false } }, plugins: { legend: { display: false } } } }); }
                if(document.getElementById('marketGapChart')) { new Chart(document.getElementById('marketGapChart').getContext('2d'), { type: 'radar', data: { labels: ['æƒ…æ„ŸåŒç†', 'æ·±å¤œéŸ¿æ‡‰', 'é†«å­¸æº–ç¢º', 'éš±ç§å®‰å…¨', 'å€‹æ€§åŒ–'], datasets: [{ label: 'æ´‹æ´‹ Yangyang', data: [95, 100, 85, 100, 95], backgroundColor: 'rgba(251, 113, 133, 0.2)', borderColor: 'rgb(251, 113, 133)' }] }, options: { maintainAspectRatio: false, scales: { r: { suggestedMin: 0, suggestedMax: 100 } } } }); }
            });
        }

        // --- 2. Momsight Logic ---
        {
            // å®Œæ•´å…§å®¹çŸ©é™£ (7éšæ®µ x 4äººæ ¼)
            const CONTENT_MATRIX = {
                pre_1: {
                    SJ: { stress: "ç¶²è·¯ä¸Šæˆåƒä¸Šè¬çš„ç¦å¿Œå’Œå¾…è¾¦äº‹é …è®“å¦³æ„Ÿåˆ°æ··äº‚ï¼Œæ·±æ€•æ¼æ‰ä»»ä½•ä¸€å€‹ç´°ç¯€ã€‚", reminder: "å¦³å·²ç¶“å¾ˆåŠªåŠ›äº†ï¼Œå¶çˆ¾æ‰“ç ´ä¸€æ¢è¦å‰‡ä¸¦ä¸æœƒæ€éº¼æ¨£ã€‚", action: "é—œæ‰æœå°‹å¼•æ“ï¼Œå»æ´—å€‹ç†±æ°´æ¾¡ï¼Œç›¸ä¿¡å¦³çš„èº«é«”ã€‚" },
                    NF: { stress: "æƒ…ç·’åƒé›²éœ„é£›è»Šï¼Œå°æ–¼èº«ä»½çš„è½‰è®Šæ„Ÿåˆ°æ—¢ç¥è–åˆè«åçš„æ†‚é¬±ã€‚", reminder: "æ‰€æœ‰çš„æƒ…ç·’éƒ½æ˜¯æ­£å¸¸çš„ï¼Œå¦³ä¸éœ€è¦ç¾åœ¨å°±è®Šæˆå®Œç¾çš„æ¯è¦ªã€‚", action: "å¯«ä¸‹å¦³ç™¼ç¾æ‡·å­•é‚£åˆ»çš„å¿ƒæƒ…ï¼Œé‚£æ˜¯å¦³å€‘æ•…äº‹çš„é–‹ç«¯ã€‚" },
                    SP: { stress: "å­•åå’Œç–²æ†Šé™åˆ¶äº†å¦³çš„è¡Œå‹•ï¼Œè¦ºå¾—ç”Ÿæ´»è®Šå¾—å¾ˆç„¡èŠã€èº«é«”ä¸æ˜¯è‡ªå·±çš„ã€‚", reminder: "é›–ç„¶æ­¥èª¿æ…¢äº†ï¼Œä½†å¦³æ­£åœ¨é€²è¡Œä¸€å ´å‰å¤§çš„å…§éƒ¨æ¢éšªã€‚", action: "è§€å¯Ÿçª—é‚Šçš„ä¸€æœµèŠ±æˆ–å¤©ç©ºçš„é›²ï¼Œç”¨éœæ…‹çš„æ–¹å¼æ¢ç´¢ä¸–ç•Œã€‚" },
                    NT: { stress: "è¨å­ç„¡æ³•æ§åˆ¶çš„ç”Ÿç†åæ‡‰ï¼Œè¦ºå¾—å¤§è…¦è®Šéˆäº†ï¼Œå°æœªçŸ¥çš„é¢¨éšªæ„Ÿåˆ°ç„¦æ…®ã€‚", reminder: "ã€Œå­•è…¦ã€æ˜¯ç‚ºäº†æŠŠèƒ½é‡ç•™çµ¦å­å®®ã€‚å¦³çš„æ™ºåŠ›æ²’æ¶ˆå¤±ï¼Œåªæ˜¯åœ¨å¾Œå°é‹ä½œã€‚", action: "æŠŠç„¦æ…®å¯«ä¸‹ä¾†ï¼Œåƒè™•ç† Bug ä¸€æ¨£ä¸€ä»¶ä»¶é‡æ¸…ï¼Œä½†è¨˜å¾—ç•™ç™½ã€‚" }
                },
                pre_2: {
                    SJ: { stress: "é–‹å§‹ç˜‹ç‹‚æ¯”è¼ƒæ¨è»Šã€æ±½åº§çš„è¦æ ¼ï¼Œæ·±æ€•è²·éŒ¯æ±è¥¿æˆ–æº–å‚™ä¸è¶³ã€‚", reminder: "æ²’æœ‰ã€Œæœ€å®Œç¾ã€çš„è£å‚™ï¼Œåªæœ‰ã€Œæœ€é©åˆã€çš„ã€‚ç›¸ä¿¡å¦³çš„é¸æ“‡ã€‚", action: "ä»Šå¤©ä¸çœ‹è©•æ¸¬ï¼Œåªæ†‘ç›´è¦ºè²·ä¸€ä»¶å–®ç´”è¦ºå¾—å¯æ„›çš„å¯¶å¯¶è¡£æœã€‚" },
                    NF: { stress: "éåº¦æ“”å¿ƒèƒ½å¦å°‡åƒ¹å€¼è§€å‚³éçµ¦å­©å­ï¼Œæˆ–å°èƒæ•™æœ‰éé«˜çš„è‡ªæˆ‘è¦æ±‚ã€‚", reminder: "å¦³çš„æ„›å°±æ˜¯æœ€å¥½çš„èƒæ•™ï¼Œä¸éœ€è¦è¯éº—çš„æ•™æã€‚", action: "æ‰¾å€‹å®‰éœçš„ä¸‹åˆï¼Œå”¸ä¸€æœ¬å¦³æœ€æ„›çš„ç¹ªæœ¬çµ¦è‚šå­è£¡çš„å¯¶å¯¶è½ã€‚" },
                    SP: { stress: "è‚šå­é–‹å§‹è®Šå¤§ï¼Œä½†ä¸æƒ³ç©¿é†œé†œçš„å­•å©¦è£ï¼Œæ¸´æœ›æœ€å¾Œçš„è‡ªç”±æ—…è¡Œã€‚", reminder: "å¦³ä¾ç„¶å¯ä»¥å¾ˆæ™‚å°šã€å¾ˆé…·ã€‚å¦³çš„æ´»åŠ›æ˜¯å¯¶å¯¶æœ€å¥½çš„é¤Šåˆ†ã€‚", action: "è¦åŠƒä¸€å ´è¼•é¬†çš„ã€Œç”¢å‰å°æ—…è¡Œ(Babymoon)ã€ï¼Œæ‹å¹¾å¼µç¾ç…§ã€‚" },
                    NT: { stress: "é‘½ç ”å„ç¨®ç”Ÿç”¢æ–¹å¼å’Œä½µç™¼ç—‡æ©Ÿç‡ï¼Œè©¦åœ–ç”¨æ•¸æ“šæŒæ§ä¸€åˆ‡ã€‚", reminder: "æœ‰äº›äº‹ç§‘å­¸ç„¡æ³•å®Œå…¨è§£é‡‹ï¼Œè©¦è‘—äº«å—èƒå‹•é‚£ç¨®ã€Œä¸åˆé‚è¼¯ã€çš„ç¥å¥‡ã€‚", action: "çœ‹ä¸€éƒ¨ç„¡è…¦å–œåŠ‡ç‰‡ï¼Œè®“å¤§è…¦å¾¹åº•æ”¾å‡ä¸€å°æ™‚ã€‚" }
                },
                pre_3: {
                    SJ: { stress: "åè¦†æª¢æŸ¥å¾…ç”¢åŒ…ï¼Œæ“”å¿ƒç”Ÿç”¢æµç¨‹å‡ºéŒ¯ï¼Œç„¦æ…®å®¶è£¡ç’°å¢ƒä¸å¤ ä¹¾æ·¨ã€‚", reminder: "å¦³æº–å‚™å¾—æ¯”99%çš„äººéƒ½å¥½ã€‚å°±ç®—æ¼å¸¶æ±è¥¿ï¼Œé†«é™¢ä¹Ÿéƒ½æœ‰ã€‚", action: "æŠŠã€Œè¯çµ¡æ¸…å–®ã€äº¤çµ¦éšŠå‹ï¼Œå¦³ç¾åœ¨çš„ä»»å‹™åªæœ‰å‘¼å¸å’Œä¼‘æ¯ã€‚" },
                    NF: { stress: "å°ç”Ÿç”¢çš„ç–¼ç—›æ„Ÿåˆ°ææ‡¼ï¼Œå®³æ€•å¤±å»åŸæœ¬çš„è‡ªå·±ï¼Œæƒ…ç·’å®¹æ˜“æ½°å ¤ã€‚", reminder: "å¦³çš„èº«é«”å¤©ç”Ÿå°±çŸ¥é“å¦‚ä½•ç”Ÿç”¢ã€‚å±è”½é‚£äº›åš‡äººçš„æ•…äº‹ã€‚", action: "æ‘¸æ‘¸è‚šå­ï¼Œè·Ÿå¯¶å¯¶èªªï¼šã€Œæˆ‘å€‘ä¸€èµ·åŠ æ²¹ï¼Œæˆ‘è¿«ä¸åŠå¾…æƒ³è¦‹å¦³ã€‚ã€" },
                    SP: { stress: "æ°´è…«åš´é‡ç„¡æ³•èµ°å‹•ï¼Œæ„Ÿåˆ°è¢«å›°åœ¨ç¬¨é‡çš„èº«é«”è£¡ï¼Œéå¸¸æ²®å–ªã€‚", reminder: "é€™ä¸æ˜¯çµ‚é»ï¼Œè€Œæ˜¯æ¢éšªå‰çš„æœ€å¾Œç´®ç‡Ÿã€‚å¦³æ­£åœ¨ç´¯ç©çˆ†ç™¼åŠ›ã€‚", action: "æ›ä¸Šæœ€èˆ’æœçš„é«˜ç´šåºŠå–®ï¼Œåœ¨åºŠä¸Šåšä¸€å ´å¿ƒéˆSPAã€‚" },
                    NT: { stress: "è¨å­ç­‰å¾…ç”¢å…†çš„ã€Œä¸ç¢ºå®šæ€§ã€ï¼Œè©¦åœ–è¨ˆç®—æœ€æœ‰æ•ˆç‡çš„ç”Ÿç”¢è·¯å¾‘ã€‚", reminder: "ç”Ÿç”¢ä¸æ˜¯è€ƒè©¦ï¼Œä¸éœ€è¦æ‹¿æ»¿åˆ†ã€‚æ¥å—ã€Œæ··äº‚ã€ä¹Ÿæ˜¯è¨ˆç•«çš„ä¸€éƒ¨åˆ†ã€‚", action: "ç·´ç¿’å†¥æƒ³ï¼Œå‘Šè¨´è‡ªå·±ï¼šæˆ‘ä¿¡ä»»æˆ‘çš„é†«ç™‚åœ˜éšŠå’Œæœ¬èƒ½ã€‚" }
                },
                post_1: {
                    SJ: { stress: "å¯¶å¯¶ä½œæ¯ä¸è¦å¾‹ï¼Œç ´å£äº†å¦³çš„è¨ˆåŠƒè¡¨ã€‚å®¶å‹™å †ç©è®“å¦³å´©æ½°ã€‚", reminder: "å¯¶å¯¶ä¸æ˜¯æ©Ÿå™¨äººï¼Œé€™ä¸‰å€‹æœˆã€Œäº‚ã€æ‰æ˜¯æ­£å¸¸çš„ã€‚", action: "æ’•æ‰ä»Šå¤©çš„ç´€éŒ„è¡¨ï¼Œå…è¨±è‡ªå·±è·Ÿè‘—å¯¶å¯¶ä¸€èµ·æ˜ç¡ã€‚" },
                    NF: { stress: "å°å¯¶å¯¶çš„å“­è²éåº¦å…±æ„Ÿï¼Œå¿ƒå¾ˆç—›ã€‚è¦ºå¾—è‡ªå·±å¦‚æœä¸çŠ§ç‰²æ‰€æœ‰å°±ä¸å¤ æ„›ä»–ã€‚", reminder: "ç©ºæ‰çš„æ¯å­å€’ä¸å‡ºæ°´ã€‚å…ˆç…§é¡§å¥½è‡ªå·±ï¼Œæ‰èƒ½çµ¦å¯¶å¯¶é«˜å“è³ªçš„æ„›ã€‚", action: "æˆ´ä¸Šé™å™ªè€³æ©Ÿ10åˆ†é˜ï¼Œè½ä¸€æ®µå†¥æƒ³éŸ³æ¨‚ï¼Œæš«æ™‚åˆ‡æ–·é€£çµã€‚" },
                    SP: { stress: "è¢«å›°åœ¨å®¶è£¡é¤µå¥¶æ›å°¿å¸ƒï¼Œæ—¥å¾©ä¸€æ—¥çš„é‡è¤‡è®“å¦³æ„Ÿåˆ°çª’æ¯ã€‚", reminder: "å¦³å¤©ç”Ÿå±¬æ–¼è‡ªç”±ã€‚ç¾åœ¨çš„æš«åœæ˜¯ç‚ºäº†æœªä¾†å¸¶å¯¶å¯¶å»æ›´é çš„åœ°æ–¹ã€‚", action: "æ¨è»Šåœ¨æ¨“ä¸‹æ•£æ­¥ä¹Ÿå¥½ï¼Œå»èèå¤–é¢çš„ç©ºæ°£ï¼Œè²·æ¯å–œæ­¡çš„é£²æ–™ã€‚" },
                    NT: { stress: "è‚²å…’æ¯«ç„¡é‚è¼¯å¯è¨€ï¼Œå¯¶å¯¶å“­é¬§ç„¡æ³•ç”¨ç†æ€§è§£æ±ºï¼Œæ„Ÿåˆ°å¼·çƒˆçš„æŒ«æŠ˜æ„Ÿã€‚", reminder: "æŠŠé€™ç•¶æˆä¸€å ´äººé¡å­¸è§€å¯Ÿã€‚å¯¶å¯¶æ˜¯ç”Ÿç‰©ï¼Œç”Ÿç‰©å°±æœ‰éš¨æ©Ÿæ€§ã€‚", action: "åœæ­¢æ€è€ƒã€Œç‚ºä»€éº¼ã€ï¼Œåªå°ˆæ³¨è§€å¯Ÿå¯¶å¯¶çš„å°æ‰‹å°è…³ã€‚" }
                },
                post_2: {
                    SJ: { stress: "å‰¯é£Ÿå“çš„æº–å‚™è®“å¦³æ‰‹å¿™è…³äº‚ï¼Œæ“”å¿ƒç‡Ÿé¤Šä¸å‡è¡¡æˆ–å¯¶å¯¶ä¸åƒã€‚", reminder: "åƒé£¯æ˜¯å¿«æ¨‚çš„äº‹ï¼Œä¸æ˜¯ä»»å‹™ã€‚èº«ä¸Šé«’äº†å¯ä»¥æ´—ï¼Œå¿«æ¨‚åƒæœ€é‡è¦ã€‚", action: "é€™é¤å°±çµ¦å¯¶å¯¶æ‰‹æŒ‡é£Ÿç‰©ï¼Œè®“ä»–è‡ªå·±ç©ï¼Œå¦³åœ¨ä¸€æ—å–å’–å•¡ã€‚" },
                    NF: { stress: "çœ‹åˆ°åˆ¥çš„åª½åª½åˆ†äº«çš„å®Œç¾è‚²å…’ç…§ï¼Œæ„Ÿåˆ°è‡ªå‘å’Œç„¦æ…®ã€‚", reminder: "ç¤¾ç¾¤åª’é«”éƒ½æ˜¯ç²¾ä¿®éçš„ã€‚å¦³çœŸå¯¦çš„æ“æŠ±æ¯”é‚£äº›ç…§ç‰‡çè²´ä¸€è¬å€ã€‚", action: "æœ¬é€±ã€Œæ–·ç¶²ã€ä¸€å¤©ï¼Œåªå°ˆæ³¨æ–¼å¦³å’Œå¯¶å¯¶çš„çœ¼ç¥äº¤æµã€‚" },
                    SP: { stress: "é–‹å§‹æƒ³å¿µç”¢å‰çš„èº«æå’Œç¤¾äº¤ç”Ÿæ´»ï¼Œè¦ºå¾—è‡ªå·±è®Šå¾—ä¸å¸å¼•äººäº†ã€‚", reminder: "å¦³çš„èº«é«”å­•è‚²äº†ç”Ÿå‘½ï¼Œé‚£äº›ç—•è·¡æ˜¯æ¦®è€€çš„å‹³ç« ã€‚å¦³ä¾ç„¶è¿·äººã€‚", action: "å®‰æ’ä¸€å€‹æ™šä¸Šçš„ã€Œåª½åª½æ”¾é¢¨æ—¥ã€ï¼ŒæŠŠå¯¶å¯¶äº¤çµ¦éšŠå‹ï¼Œå»èšé¤å§ã€‚" },
                    NT: { stress: "æ“”å¿ƒå¯¶å¯¶çš„ç™¼å±•é‡Œç¨‹ç¢‘(ç¿»èº«ã€å)è½å¾Œæ–¼æ•¸æ“šï¼Œé–‹å§‹ç˜‹ç‹‚æŸ¥è³‡æ–™ã€‚", reminder: "æ¯å€‹å­©å­éƒ½æœ‰è‡ªå·±çš„æ™‚å€ã€‚æ•¸æ“šæ˜¯åƒè€ƒï¼Œä¸æ˜¯åˆ¤æ±ºã€‚", action: "æ”¾ä¸‹ç™¼å±•é‡è¡¨ï¼Œå–®ç´”åœ°å’Œå¯¶å¯¶ç©èº²è²“è²“ï¼Œäº«å—ç¬‘è²ã€‚" }
                },
                post_3: {
                    SJ: { stress: "å¯¶å¯¶é–‹å§‹çˆ¬è¡Œï¼Œå®¶è£¡è®Šå¾—æ›´äº‚ï¼Œåˆ°è™•éƒ½æ˜¯å®‰å…¨éš±æ‚£ï¼Œç¥ç¶“ç·Šç¹ƒã€‚", reminder: "å®¶æ˜¯ç”¨ä¾†ä½çš„ï¼Œä¸æ˜¯æ¨£å“å±‹ã€‚æŠŠå±éšªç‰©å“æ”¶å¥½ï¼Œå…¶ä»–çš„å°±éš¨ä»–å§ã€‚", action: "åŠƒå®šä¸€å€‹ã€Œå®‰å…¨éŠæˆ²å€ã€ï¼Œå¦³åªè¦ååœ¨è£¡é¢çœ‹è‘—å°±å¥½ã€‚" },
                    NF: { stress: "å¯¶å¯¶é–‹å§‹æœ‰åˆ†é›¢ç„¦æ…®ï¼Œé»è‘—å¦³ä¸æ”¾ï¼Œè®“å¦³æ„Ÿåˆ°çª’æ¯åˆå…§ç–šã€‚", reminder: "è¢«éœ€è¦å¾ˆå¹¸ç¦ï¼Œä½†å¦³ä¹Ÿéœ€è¦ç©ºé–“ã€‚çŸ­æš«é›¢é–‹æ˜¯ç‚ºäº†æ›´å¥½çš„é‡é€¢ã€‚", action: "æ¯å¤©çµ¦è‡ªå·±30åˆ†é˜çš„ã€Œçµ•å°ç¨è™•ã€æ™‚é–“ï¼Œåšå¦³å–œæ­¡çš„äº‹ã€‚" },
                    SP: { stress: "å¸¶å¯¶å¯¶å‡ºé–€å¤§åŒ…å°åŒ…å¾ˆéº»ç…©ï¼Œé™åˆ¶äº†å¦³æƒ³æ¢ç´¢ä¸–ç•Œçš„æ…¾æœ›ã€‚", reminder: "é›–ç„¶éº»ç…©ï¼Œä½†å¯¶å¯¶çœ¼ä¸­çš„æ–°ä¸–ç•Œæœƒè®“å¦³é‡æ–°ç™¼ç¾æ—…è¡Œçš„æ¨‚è¶£ã€‚", action: "å˜—è©¦å¸¶å¯¶å¯¶å»ä¸€å€‹è¿‘éƒŠçš„æ–°æ™¯é»ï¼Œä¾†å ´å¾®å‹æ¢éšªã€‚" },
                    NT: { stress: "é–‹å§‹ç ”ç©¶æ—©æ•™èª²ç¨‹å’Œè…¦åŠ›é–‹ç™¼ï¼Œæ·±æ€•éŒ¯éé»ƒé‡‘æœŸã€‚", reminder: "æœ€å¥½çš„ç©å…·æ˜¯çˆ¶æ¯çš„é™ªä¼´ï¼Œæœ€å¥½çš„æ•™å®¤æ˜¯å¤§è‡ªç„¶ã€‚", action: "å¸¶å¯¶å¯¶å»å…¬åœ’æ‘¸æ‘¸è‰åœ°ã€ç©ç©æ²™å­ï¼Œé€™æ¯”é–ƒç¤ºå¡æœ‰ç”¨å¤šäº†ã€‚" }
                },
                post_4: {
                    SJ: { stress: "é¢è‡¨é‡è¿”è·å ´æˆ–è‚²å…’çš„å¹³è¡¡ï¼Œè¦ºå¾—å…©é‚Šéƒ½åšä¸å¥½ï¼Œå……æ»¿ç½ªæƒ¡æ„Ÿã€‚", reminder: "å¦³æ˜¯å­©å­æœ€å¥½çš„æ¦œæ¨£ã€‚èªçœŸå·¥ä½œçš„å¦³å’ŒèªçœŸè‚²å…’çš„å¦³ä¸€æ¨£ç¾éº—ã€‚", action: "ä¸‹ç­å›å®¶å‰ï¼Œåœ¨è»Šä¸Šæˆ–é–€å£åœ5åˆ†é˜ï¼Œè½‰æ›å¿ƒæƒ…å†é€²é–€ã€‚" },
                    NF: { stress: "æ„Ÿå˜†æ™‚é–“éå¤ªå¿«ï¼Œå¯¶å¯¶ä¸å†é‚£éº¼ä¾è³´å¦³ï¼Œæ„Ÿåˆ°å¤±è½ã€‚", reminder: "å­©å­çš„ç¨ç«‹æ˜¯å¦³çµ¦ä»–æœ€å¥½çš„ç¦®ç‰©ã€‚å¦³çš„æ„›æœƒè½‰åŒ–ç‚ºä»–èƒŒå¾Œçš„é¢¨ã€‚", action: "æ•´ç†é€™ä¸€å¹´ä¾†çš„ç…§ç‰‡ï¼Œåšæˆä¸€æœ¬ç›¸ç°¿ï¼Œæ…¶ç¥å¦³å€‘çš„æˆé•·ã€‚" },
                    SP: { stress: "è‚²å…’ç”Ÿæ´»è¶¨æ–¼å¹³æ·¡ï¼Œæ¸´æœ›æ–°çš„åˆºæ¿€å’ŒæŒ‘æˆ°ã€‚", reminder: "ä¸€æ­²äº†ï¼å¦³å·²ç¶“ç†¬éæœ€é›£çš„æ™‚æœŸã€‚æ˜¯æ™‚å€™æ‰¾å›ä¸€äº›å€‹äººçš„æ„›å¥½äº†ã€‚", action: "å ±åä¸€å€‹å¦³æ„Ÿèˆˆè¶£çš„èª²ç¨‹(ç‘œçˆã€ç¹ªç•«)ï¼Œæ‰¾å›ã€Œè‡ªå·±ã€çš„åå­—ã€‚" },
                    NT: { stress: "é–‹å§‹ç„¦æ…®å¹¼å…’åœ’çš„é¸æ“‡å’Œæœªä¾†çš„æ•™è‚²è·¯å¾‘ã€‚", reminder: "è·¯é‚„å¾ˆé•·ã€‚åŸ¹é¤Šä»–è§£æ±ºå•é¡Œçš„èƒ½åŠ›å’Œå¥½å¥‡å¿ƒï¼Œæ¯”é¸åæ ¡æ›´é‡è¦ã€‚", action: "å’ŒéšŠå‹ä¾†å ´ç´„æœƒï¼ŒèŠèŠè‚²å…’ä»¥å¤–çš„è©±é¡Œï¼Œé‡æº«å…©äººä¸–ç•Œã€‚" }
                }
            };

            const TIME_STAGES = [
                { id: 'pre_1', label: 'æ‡·å­•åˆæœŸ', range: [-280, -190] }, { id: 'pre_2', label: 'æ‡·å­•ä¸­æœŸ', range: [-189, -90] }, { id: 'pre_3', label: 'æ‡·å­•å¾ŒæœŸ', range: [-89, -1] },
                { id: 'post_1', label: 'ç”¢å¾Œä¸‰å€‹æœˆ', range: [0, 90] }, { id: 'post_2', label: 'ç”¢å¾Œå…­å€‹æœˆ', range: [91, 180] }, { id: 'post_3', label: 'ç”¢å¾Œä¹å€‹æœˆ', range: [181, 270] }, { id: 'post_4', label: 'ç”¢å¾Œä¸€å¹´', range: [271, 365] }
            ];

            const BASE_QUESTIONS = [
                {Q:"å¥½ä¸å®¹æ˜“æŠŠå¯¶å¯¶å“„ç¡ï¼Œé€™çè²´çš„15åˆ†é˜å¦³æœƒï¼Ÿ", A:"äº«å—çµ•å°å®‰éœï¼Œä¸èªªè©±", B:"å‚³è¨Šæ¯çµ¦æœ‹å‹ç™¼ç‰¢é¨·", tA:'I', tB:'E'},
                {Q:"å¸¶å¯¶å¯¶æ•£æ­¥é‡åˆ°é„°å±…æ­è¨•ï¼Œå¦³çš„åæ‡‰ï¼Ÿ", A:"ç¦®è²Œå¾®ç¬‘æƒ³è¶•å¿«èµ°", B:"é–‹å¿ƒèŠå¤©è£œå……é›»åŠ›", tA:'I', tB:'E'},
                {Q:"ç”¢å¾Œæ†‚é¬±æˆ–ä½è½æ™‚ï¼Œå¦³å‚¾å‘ï¼Ÿ", A:"èº²åœ¨æˆ¿é–“è‡ªæˆ‘ä¿®å¾©", B:"æ‰¾äººå‚¾è¨´å®£æ´©æƒ…ç·’", tA:'I', tB:'E'},
                {Q:"å°æ–¼ã€Œæ€§åˆ¥æ­æ›‰æ´¾å°ã€é€™é¡æ´»å‹•çš„æƒ³æ³•ï¼Ÿ", A:"åªæƒ³è·Ÿè€å…¬å…©äººç§ä¸‹æ…¶ç¥", B:"ç•¶ç„¶è¦è¾¦å€‹å¤§æ´¾å°ç†±é¬§ä¸€ä¸‹", tA:'I', tB:'E'},
                {Q:"é€±æœ«éšŠå‹æè­°å¸¶å¯¶å¯¶å»å¤§è³£å ´ï¼Œå¦³è¦ºå¾—ï¼Ÿ", A:"äººå¥½å¤šå¥½ç´¯ï¼Œå¯§é¡˜åœ¨å®¶", B:"å¥½è€¶ï¼å»çœ‹çœ‹äººç¾¤ä¹Ÿå¥½", tA:'I', tB:'E'},
                {Q:"åŠ å…¥åª½åª½ç¾¤çµ„å¾Œï¼Œå¦³é€šå¸¸ï¼Ÿ", A:"åªæ½›æ°´çœ‹ä¹¾è²¨ï¼Œå¾ˆå°‘ç™¼è¨€", B:"ç©æ¥µå›æ‡‰ï¼Œåˆ†äº«è‡ªå®¶å¯¶å¯¶ç…§ç‰‡", tA:'I', tB:'E'},
                {Q:"éœ€è¦åšé‡å¤§è‚²å…’æ±ºå®šæ™‚ï¼Œå¦³æœƒï¼Ÿ", A:"è‡ªå·±æŸ¥è³‡æ–™æ€è€ƒ", B:"å•éæ‰€æœ‰è¦ªå‹çš„æ„è¦‹", tA:'I', tB:'E'},
                {Q:"æœ‹å‹æƒ³ä¾†æ¢æœ›æ–°ç”Ÿå…’ï¼Œå¦³çš„æƒ³æ³•ï¼Ÿ", A:"è¦ºå¾—æ‹›å¾…å®¢äººå£“åŠ›å¾ˆå¤§", B:"æ­¡è¿ï¼æ­£å¥½æœ‰äººé™ªæˆ‘èŠå¤©", tA:'I', tB:'E'},
                {Q:"è²·æ¨è»Šæ™‚ï¼Œå¦³æœ€åœ¨æ„ï¼Ÿ", A:"é¿éœ‡æ•¸æ“šã€è€é‡å…¬æ–¤æ•¸", B:"è¨­è¨ˆæ„Ÿã€æ¨å‡ºå»çš„æ°›åœ", tA:'S', tB:'N'},
                {Q:"å¯¶å¯¶ç¬¬ä¸€æ¬¡èƒå‹•ï¼Œå¦³çš„ç¬¬ä¸€å€‹å¿µé ­ï¼Ÿ", A:"å–”ï¼ä»–åœ¨è¸¢é€™å€‹ä½ç½®ï¼Œå¾ˆæœ‰åŠ›", B:"å“‡ï¼ä»–åœ¨è·Ÿæˆ‘æ‰“æ‹›å‘¼ï¼Œä»–æ˜¯å€‹æ´»æ½‘çš„å­©å­", tA:'S', tB:'N'},
                {Q:"çœ‹è‚²å…’æ›¸æ™‚ï¼Œå¦³åå¥½ï¼Ÿ", A:"å…·é«”çš„ç…§è­·æ­¥é©ŸSOP", B:"æ¢è¨å…’ç«¥å¿ƒç†èˆ‡éˆæ€§çš„ç¯‡ç« ", tA:'S', tB:'N'},
                {Q:"å°æ–¼å¯¶å¯¶çš„æœªä¾†ï¼Œå¦³æ¯”è¼ƒå¸¸æƒ³ï¼Ÿ", A:"ä¸‹å€‹æœˆè¦æ‰“ä»€éº¼ç–«è‹—ã€è²·ä»€éº¼å°ºå¯¸å°¿å¸ƒ", B:"ä»–é•·å¤§å¾Œæœƒæ˜¯ä»€éº¼å€‹æ€§ã€æˆ‘å€‘æœƒæœ‰å“ªäº›å›æ†¶", tA:'S', tB:'N'},
                {Q:"æŒ‘é¸ç©å…·æ™‚ï¼Œå¦³å‚¾å‘ï¼Ÿ", A:"å®‰å…¨ã€è€ç”¨ã€å¥½æ¸…æ´—", B:"èƒ½æ¿€ç™¼æƒ³åƒåŠ›ã€æœ‰æ•…äº‹æ€§", tA:'S', tB:'N'},
                {Q:"é¢å°é•·è¼©çš„è‚²å…’å»ºè­°ï¼Œå¦³æœƒï¼Ÿ", A:"çœ‹æ˜¯å¦ç¬¦åˆç¾ä»£é†«å­¸å¯¦è­‰", B:"æ„Ÿè¦ºä»–å€‘çš„å‡ºç™¼é»æ˜¯å¦å–„æ„", tA:'S', tB:'N'},
                {Q:"æº–å‚™å‰¯é£Ÿå“æ™‚ï¼Œå¦³æ›´é‡è¦–ï¼Ÿ", A:"ç²¾æº–çš„å…‹æ•¸å’Œç‡Ÿé¤Šæ¯”ä¾‹", B:"é¡è‰²çš„æ­é…å’Œæ“ºç›¤çš„ç¾æ„Ÿ", tA:'S', tB:'N'},
                {Q:"å¯¶å¯¶ä¸æ˜åŸå› å¤§å“­ï¼Œå¦³çš„ç¬¬ä¸€åæ‡‰ï¼Ÿ", A:"æª¢æŸ¥å°¿å¸ƒã€é«”æº«(Debugæ¨¡å¼)", B:"å¿ƒå¥½ç—›ï¼Œå…ˆæŠ±ç·Šä»–å†èªª", tA:'T', tB:'F'},
                {Q:"è€å…¬å¹«å¿™ä½†ç¬¨æ‰‹ç¬¨è…³ï¼Œå¦³æœƒï¼Ÿ", A:"ç›´æ¥æŒ‡å‡ºéŒ¯èª¤ä¸¦ç³¾æ­£", B:"çœ‹ä»–å¾ˆåŠªåŠ›ï¼Œå…ˆç¨±è®šå†èªª", tA:'T', tB:'F'},
                {Q:"å¦³èªç‚ºæ•™é¤Šæœ€é‡è¦çš„æ˜¯ï¼Ÿ", A:"åŸ¹é¤Šç¨ç«‹é‚è¼¯æ€è€ƒ", B:"çµ¦äºˆæ»¿æ»¿çš„å®‰å…¨æ„Ÿèˆ‡æ„›", tA:'T', tB:'F'},
                {Q:"ç¶²è·¯ä¸Šçœ‹åˆ°åš´å²çš„ç®¡æ•™å½±ç‰‡ï¼Œå¦³æœƒï¼Ÿ", A:"åˆ†æè©²æ–¹æ³•çš„æˆæ•ˆèˆ‡åˆç†æ€§", B:"è¦ºå¾—å­©å­å¥½å¯æ†ï¼Œçœ‹ä¸ä¸‹å»", tA:'T', tB:'F'},
                {Q:"å¯¶å¯¶æ‘”å€’äº†ï¼Œå¦³æœƒï¼Ÿ", A:"ç¢ºèªå‚·å‹¢ï¼Œæ•™ä»–ä¸‹æ¬¡å°å¿ƒ", B:"ç§€ç§€å‘¼å‘¼ï¼Œå®‰æ’«å—é©šåš‡çš„æƒ…ç·’", tA:'T', tB:'F'},
                {Q:"å°æ–¼ã€Œç™¾æ­²é†«å¸«ã€é€™é¡åš´æ ¼ä½œæ¯æ³•ï¼Œå¦³è¦ºå¾—ï¼Ÿ", A:"å¾ˆæœ‰é“ç†ï¼Œè¦å¾‹å°å¤§å®¶éƒ½å¥½", B:"å¤ªæ®˜å¿äº†ï¼Œæ¨ä¸å¾—è®“å¯¶å¯¶å“­", tA:'T', tB:'F'},
                {Q:"é—œæ–¼å¾…ç”¢åŒ…çš„æº–å‚™ï¼Ÿ", A:"7å€‹æœˆå°±åˆ—å¥½æ¸…å–®æ”¶å¥½", B:"å¿«ç”Ÿäº†æ‰é–‹å§‹éš¨èˆˆä¸Ÿæ±è¥¿é€²å»", tA:'J', tB:'P'},
                {Q:"å¯¶å¯¶ä»Šå¤©ä¸ç¡åˆè¦ºæ‰“äº‚è¨ˆç•«ï¼Œå¦³æœƒï¼Ÿ", A:"æ„Ÿåˆ°ç„¦æ…®ç…©èº", B:"æ²’å·®ï¼Œé‚£å°±å¸¶å»å…¬åœ’ç©å§", tA:'J', tB:'P'},
                {Q:"å®¶è£¡çš„è‚²å…’ç’°å¢ƒæ˜¯ï¼Ÿ", A:"ç‰©å“å®šä½ï¼Œå¥¶ç“¶å°¿å¸ƒæœ‰å°ˆå±¬å€", B:"éš¨èˆˆæ“ºæ”¾ï¼Œæ‹¿å¾—åˆ°å°±å¥½", tA:'J', tB:'P'},
                {Q:"å°æ–¼ç”Ÿç”¢è¨ˆç•«æ›¸ï¼Ÿ", A:"å¸Œæœ›èƒ½æŒ‰éƒ¨å°±ç­åŸ·è¡Œ", B:"éš¨æ©Ÿæ‡‰è®Šï¼Œå¥åº·å°±å¥½", tA:'J', tB:'P'},
                {Q:"é€±æœ«çš„è¦ªå­è¡Œç¨‹ï¼Ÿ", A:"å¹¾é»å‡ºç™¼ã€å»å“ªè£¡éƒ½æ’å¥½", B:"ç¡é†’çœ‹å¤©æ°£å¿ƒæƒ…å†æ±ºå®š", tA:'J', tB:'P'},
                {Q:"å¯¶å¯¶çš„ç©¿æ­é¢¨æ ¼ï¼Ÿ", A:"åˆ†é¡æ”¶ç´ï¼Œæˆå¥—æ­é…", B:"æŠ“åˆ°å“ªä»¶ç©¿å“ªä»¶ï¼Œæ··æ­é¢¨", tA:'J', tB:'P'},
                {Q:"ç™¼ç¾é€™é€±è¡Œç¨‹å…¨æ»¿ï¼Œå¦³æœƒï¼Ÿ", A:"å……æ»¿å¹¹å‹ï¼Œä¸€é …é …å®Œæˆ", B:"æ„Ÿåˆ°å£“åŠ›ï¼Œæƒ³å–æ¶ˆå¹¾å€‹", tA:'J', tB:'P'},
                {Q:"å¦³è¦ºå¾—ã€Œå¥½åª½åª½ã€çš„å®šç¾©åå‘ï¼Ÿ", A:"èƒ½é«˜æ•ˆè§£æ±ºå•é¡Œ", B:"èƒ½æ•éŠ³å¯Ÿè¦ºæƒ…ç·’", tA:'T', tB:'F'},
                {Q:"è·Ÿåˆ¥çš„åª½åª½èŠå¤©æ™‚ï¼Œå¦³å–œæ­¡ï¼Ÿ", A:"äº¤æµå¯¦ç”¨è³‡è¨Š(å“ªè£¡ç‰¹åƒ¹)", B:"åˆ†äº«å¿ƒæƒ…èˆ‡ç”˜è‹¦è«‡", tA:'T', tB:'F'},
                {Q:"å°æ–¼ã€Œç…§æ›¸é¤Šã€é€™ä»¶äº‹ï¼Ÿ", A:"æ›¸æ˜¯å‰äººæ™ºæ…§ï¼Œå€¼å¾—éµå®ˆ", B:"æ¯å€‹å¯¶å¯¶ä¸åŒï¼Œç›´è¦ºæ›´æº–", tA:'S', tB:'N'},
                {Q:"ä¸€å€‹äººé¡§å°å­©æ™‚ï¼Œå¦³è¦ºå¾—æœ€é›£çš„æ˜¯ï¼Ÿ", A:"æ²’äººå¯ä»¥è¬›è©±", B:"æ²’äººå¯ä»¥æ¥æ‰‹æ›æ‰‹", tA:'E', tB:'I'}
            ];

            let currentStage = null;
            let currentQuiz = [];
            let qIndex = 0;
            let scores = { E:0, I:0, S:0, N:0, T:0, F:0, J:0, P:0 };

            window.checkDateAndStart = function() {
                const input = document.getElementById('target-date').value;
                if(!input) { document.getElementById('error-msg').classList.remove('hidden'); return; }
                document.getElementById('error-msg').classList.add('hidden');
                
                // æ¢å¾©æ—¥æœŸè¨ˆç®—é‚è¼¯
                const target = new Date(input); const now = new Date();
                const diffDays = Math.floor((now - target) / (1000 * 60 * 60 * 24));
                currentStage = TIME_STAGES.find(s => diffDays >= s.range[0] && diffDays <= s.range[1]) || TIME_STAGES[TIME_STAGES.length-1];
                if(diffDays < -280) currentStage = TIME_STAGES[0];

                startQuiz();
            }

            function startQuiz() {
                // çœŸæ­£çš„éš¨æ©Ÿä¸é‡è¤‡é¸é¡Œ
                let pool = [...BASE_QUESTIONS].sort(() => 0.5 - Math.random());
                currentQuiz = pool.slice(0, 12);
                qIndex = 0;
                scores = { E:0, I:0, S:0, N:0, T:0, F:0, J:0, P:0 };
                document.getElementById('section-input').classList.add('hidden');
                document.getElementById('section-quiz').classList.remove('hidden');
                renderQuestion();
            }

            function renderQuestion() {
                if(qIndex >= currentQuiz.length) { finishQuiz(); return; }
                const q = currentQuiz[qIndex];
                document.getElementById('q-current').innerText = qIndex + 1;
                document.getElementById('q-bar').style.width = `${((qIndex)/currentQuiz.length)*100}%`;
                document.getElementById('q-text').innerText = q.Q;
                const optsDiv = document.getElementById('q-options');
                optsDiv.innerHTML = '';
                [{txt: q.A, type: q.tA}, {txt: q.B, type: q.tB}].sort(() => 0.5 - Math.random()).forEach(b => {
                    const btn = document.createElement('button');
                    btn.className = "quiz-option w-full p-4 rounded-xl text-left text-gray-700 font-medium text-sm md:text-base mb-2";
                    btn.innerText = b.txt;
                    btn.onclick = () => { scores[b.type]++; qIndex++; renderQuestion(); };
                    optsDiv.appendChild(btn);
                });
            }

            function finishQuiz() {
                // çœŸå¯¦è¨ˆç®— MBTI
                const mbti = (scores.E >= scores.I ? 'E' : 'I') + (scores.S >= scores.N ? 'S' : 'N') + (scores.T >= scores.F ? 'T' : 'F') + (scores.J >= scores.P ? 'J' : 'P');
                
                // åˆ¤æ–·å®¶æ—
                let family = 'SJ';
                if (mbti.includes('S') && mbti.includes('J')) family = 'SJ';
                else if (mbti.includes('N') && mbti.includes('F')) family = 'NF';
                else if (mbti.includes('S') && mbti.includes('P')) family = 'SP';
                else if (mbti.includes('N') && mbti.includes('T')) family = 'NT';

                const titles = { SJ: "å®ˆè­·è€…åª½å’ª", NF: "ç†æƒ³å®¶åª½å’ª", SP: "æ¢éšªå®¶åª½å’ª", NT: "ç†æ€§æ´¾åª½å’ª" };
                // å®¹éŒ¯è™•ç†ï¼šå¦‚æœè©²éšæ®µæ²’æœ‰è³‡æ–™ï¼Œä½¿ç”¨ pre_1 æˆ–è©²å®¶æ—çš„é»˜èªå€¼
                const stageData = CONTENT_MATRIX[currentStage.id] || CONTENT_MATRIX['pre_1'];
                const content = stageData[family] || stageData['SJ'];
                
                document.getElementById('res-title').innerText = `${titles[family]} (${mbti})`;
                document.getElementById('res-stage-badge').innerText = currentStage.label;
                document.getElementById('res-stress').innerText = content.stress;
                document.getElementById('res-reminder').innerText = content.reminder;
                document.getElementById('res-action').innerText = content.action;
                
                // æ›´è²¼å¿ƒçš„ SOS å…§å®¹
                const sosText = `è¦ªæ„›çš„éšŠå‹ï¼š\n\næˆ‘æ˜¯${mbti}é¡å‹çš„${titles[family]}ï¼Œç¾åœ¨è™•æ–¼${currentStage.label}ã€‚\n\næœ€è¿‘æˆ‘å¸¸æ„Ÿåˆ°ï¼š\nã€Œ${content.stress}ã€\n\né€™ä¸æ˜¯ç„¡ç†å–é¬§ï¼Œè€Œæ˜¯å› ç‚ºæˆ‘å¤ªåœ¨ä¹ã€‚\n\nä½ å¯ä»¥é€™æ¨£å¹«æˆ‘ï¼š\n1. ${content.action}\n2. çµ¦æˆ‘ä¸€å€‹ä¸å¸¶è©•åƒ¹çš„æ“æŠ±\n3. å‘Šè¨´æˆ‘ã€Œæˆ‘å€‘ä¸€èµ·é¢å°ã€\n\nè¬è¬ä½ æˆç‚ºæˆ‘çš„ç¥éšŠå‹ï¼`;
                document.getElementById('sos-content').innerText = sosText;

                document.getElementById('section-quiz').classList.add('hidden');
                document.getElementById('section-result').classList.remove('hidden');
            }

            window.resetTest = function() {
                document.getElementById('section-result').classList.add('hidden');
                document.getElementById('section-input').classList.remove('hidden');
                document.getElementById('target-date').value = '';
            }

            window.showYangYangModal = function(e) { e.preventDefault(); document.getElementById('modal-yang').classList.remove('hidden'); }
            window.showSosModal = function() { 
                document.getElementById('modal-sos').classList.remove('hidden'); 
                document.getElementById('btn-copy').onclick = () => { 
                    const text = document.getElementById('sos-content').innerText;
                    navigator.clipboard.writeText(text).then(() => alert('è¤‡è£½æˆåŠŸï¼å¿«å‚³çµ¦è€å…¬ï¼'));
                };
            }
            window.closeModal = function(id) { document.getElementById(id).classList.add('hidden'); }
        }
    </script>
</body>
</html>